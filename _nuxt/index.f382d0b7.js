import{a as x,o as l,b as p,e as L,p as P,f as I,h as u,r as d,i as S,j as $,F as N,k as j,u as _,l as g,w as D,v as O,m as R,t as B}from"./entry.37a44b0c.js";const F=e=>(P("data-v-7bd7c894"),e=e(),I(),e),K={key:0,class:"loading-overlay"},V=F(()=>u("div",{class:"spinner"},null,-1)),X=[V],Y={__name:"Loading",props:{isLoading:{type:Boolean,required:!0}},setup(e){return(o,h)=>e.isLoading?(l(),p("div",K,X)):L("",!0)}},T=x(Y,[["__scopeId","data-v-7bd7c894"]]);const U=e=>(P("data-v-6d4c1eab"),e=e(),I(),e),W=U(()=>u("h2",{class:"title"},"都道府県を選択",-1)),z={class:"prefectures-container"},M=["id","value","disabled"],q=["for"],J={__name:"Chart",setup(e){const o="ST9um6onAEbC10KaCaeCdJOXWjj51ZgRsnwhsP1z",h="https://opendata.resas-portal.go.jp/api/v1/prefectures",y="https://opendata.resas-portal.go.jp/api/v1/population/composition/perYear",n=d({title:{text:"年度別総人口推移",style:{fontSize:"1.5rem",fontWeight:"bold"}},xAxis:{title:{text:"年度"},categories:[]},yAxis:{title:{text:"総人口"},labels:{formatter:function(){return this.value}},tickInterval:1e6},series:[],plotOptions:{series:{lineWidth:2,marker:{radius:4},label:{connectorAllowed:!1}}}}),c=d(!1),v=d([]),s=d([]);async function w(){const a=await(await fetch(h,{headers:{"X-API-KEY":o}})).json();v.value=a.result}async function A(r){return(await(await fetch(`${y}?prefCode=${r}`,{headers:{"X-API-KEY":o}})).json()).result.data[0].data}async function C(){c.value=!0;const r=s.value.map(t=>A(t)),a=await Promise.all(r),f=s.value.map((t,m)=>{const k=a[m].map(i=>i.value),E=a[0].map(i=>i.year.toString());n.value.xAxis.categories=E;const b=v.value.find(i=>i.prefCode===t);return{name:b?b.prefName:"東京都",data:k}});n.value.series=f,c.value=!1}return S(async()=>{await w(),s.value=["13"],await C()}),(r,a)=>{const f=$("highchart");return l(),p("div",null,[W,u("div",z,[(l(!0),p(N,null,j(_(v),t=>(l(),p("div",{class:"prefecture-item",key:t.prefCode},[D(u("input",{type:"checkbox",id:t.prefCode,value:t.prefCode,"onUpdate:modelValue":a[0]||(a[0]=m=>R(s)?s.value=m:null),disabled:_(c),onChange:C},null,40,M),[[O,_(s)]]),u("label",{for:t.prefCode},B(t.prefName),9,q)]))),128))]),g(f,{options:_(n)},null,8,["options"])])}}},Z=x(J,[["__scopeId","data-v-6d4c1eab"]]);const G={class:"container"},H={__name:"index",setup(e){const o=d(!1);return(h,y)=>{const n=T,c=Z;return l(),p("div",G,[g(n,{"is-loading":_(o)},null,8,["is-loading"]),g(c)])}}},ae=x(H,[["__scopeId","data-v-ad9fc2c7"]]);export{ae as default};
