import{a as x,o as i,b as d,e as S,p as I,f as b,h as _,r as h,i as L,j as N,F as j,k as D,u as r,l as g,w as O,v as R,m as B,t as F}from"./entry.fefa7103.js";const K=e=>(I("data-v-7bd7c894"),e=e(),b(),e),V={key:0,class:"loading-overlay"},X=K(()=>_("div",{class:"spinner"},null,-1)),Y=[X],T={__name:"Loading",props:{isLoading:{type:Boolean,required:!0}},setup(e){return(l,p)=>e.isLoading?(i(),d("div",V,Y)):S("",!0)}},U=x(T,[["__scopeId","data-v-7bd7c894"]]);const W=e=>(I("data-v-1500fdf2"),e=e(),b(),e),z=W(()=>_("h2",{class:"title"},"都道府県を選択",-1)),M={class:"prefectures-container"},q=["id","value","disabled"],J=["for"],Z={__name:"Chart",setup(e){const l="ST9um6onAEbC10KaCaeCdJOXWjj51ZgRsnwhsP1z",p="https://opendata.resas-portal.go.jp/api/v1/prefectures",w="https://opendata.resas-portal.go.jp/api/v1/population/composition/perYear",v=h({title:{text:"年度別総人口推移",style:{fontSize:"1.5rem",fontWeight:"bold"}},xAxis:{title:{text:"年度"},categories:[]},yAxis:{title:{text:"総人口"},labels:{formatter:function(){return this.value}},tickInterval:1e6},series:[],plotOptions:{series:{lineWidth:2,marker:{radius:4},label:{connectorAllowed:!1}}}}),u=h(!1),m=h([]),a=h([]);async function A(){const t=await(await fetch(p,{headers:{"X-API-KEY":l}})).json();m.value=t.result}async function $(o){return(await(await fetch(`${w}?prefCode=${o}`,{headers:{"X-API-KEY":l}})).json()).result.data[0].data}async function y(){u.value=!0;const o=a.value.map(n=>$(n)),t=await Promise.all(o),f=a.value.map((n,s)=>{const k=t[s].map(c=>c.value),E=t[0].map(c=>c.year.toString());v.value.xAxis.categories=E;const P=m.value.find(c=>c.prefCode===n);return{name:P?P.prefName:"東京都",data:k}});v.value.series=f,u.value=!1}return L(async()=>{await A(),a.value=["13"],await y()}),(o,t)=>{const f=N("highchart"),n=U;return i(),d("div",null,[z,_("div",M,[(i(!0),d(j,null,D(r(m),s=>(i(),d("div",{class:"prefecture-item",key:s.prefCode},[O(_("input",{type:"checkbox",id:s.prefCode,value:s.prefCode,"onUpdate:modelValue":t[0]||(t[0]=C=>B(a)?a.value=C:null),disabled:r(u),onChange:y},null,40,q),[[R,r(a)]]),_("label",{for:s.prefCode},F(s.prefName),9,J)]))),128))]),g(f,{options:r(v)},null,8,["options"]),g(n,{"is-loading":r(u)},null,8,["is-loading"])])}}},G=x(Z,[["__scopeId","data-v-1500fdf2"]]);const H={},Q={class:"container"};function ee(e,l){const p=G;return i(),d("div",Q,[g(p)])}const ae=x(H,[["render",ee],["__scopeId","data-v-6695e1c6"]]);export{ae as default};
