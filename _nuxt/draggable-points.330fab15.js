function ie(w,u){for(var B=0;B<u.length;B++){const c=u[B];if(typeof c!="string"&&!Array.isArray(c)){for(const m in c)if(m!=="default"&&!(m in w)){const S=Object.getOwnPropertyDescriptor(c,m);S&&Object.defineProperty(w,m,S.get?S:{enumerable:!0,get:()=>c[m]})}}}return Object.freeze(Object.defineProperty(w,Symbol.toStringTag,{value:"Module"}))}var C={},ne={get exports(){return C},set exports(w){C=w}};(function(w){(function(u){w.exports?(u.default=u,w.exports=u):u(typeof Highcharts<"u"?Highcharts:void 0)})(function(u){function B(c,m,S,b){c.hasOwnProperty(m)||(c[m]=b.apply(null,S),typeof CustomEvent=="function"&&window.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:m,module:c[m]}})))}u=u?u._modules:{},B(u,"Extensions/DraggablePoints.js",[u["Core/Animation/AnimationUtilities.js"],u["Core/Chart/Chart.js"],u["Core/Globals.js"],u["Core/Series/Point.js"],u["Core/Series/Series.js"],u["Core/Series/SeriesRegistry.js"],u["Core/Utilities.js"]],function(c,m,S,b,Y,N,P){function E(e){return{left:"right",right:"left",top:"bottom",bottom:"top"}[e]}function T(e){var r=["draggableX","draggableY"],t;for(H(e.dragDropProps,function(o){o.optionName&&r.push(o.optionName)}),t=r.length;t--;)if(e.options.dragDrop[r[t]])return!0}function U(e){var r=e.series?e.series.length:0;if(e.hasCartesianSeries&&!e.polar){for(;r--;)if(e.series[r].options.dragDrop&&T(e.series[r]))return!0}}function K(e){var r=e.series,t=r.options.dragDrop||{};e=e.options&&e.options.dragDrop;var o,i;return H(r.dragDropProps,function(n){n.axis==="x"&&n.move?o=!0:n.axis==="y"&&n.move&&(i=!0)}),(t.draggableX&&o||t.draggableY&&i)&&!(e&&e.draggableX===!1&&e.draggableY===!1)&&r.yAxis&&r.xAxis}function X(e,r){return typeof e.chartX>"u"||typeof e.chartY>"u"?r.pointer.normalize(e):e}function V(e,r,t,o){var i=r.map(function(n){return z(e,n,t,o)});return function(){i.forEach(function(n){n()})}}function R(e,r,t){var o=r.dragDropData.origin;r=o.chartX,o=o.chartY;var i=e.chartX;return e=e.chartY,Math.sqrt((i-r)*(i-r)+(e-o)*(e-o))>t}function W(e,r,t){var o={chartX:e.chartX,chartY:e.chartY,guideBox:t&&{x:t.attr("x"),y:t.attr("y"),width:t.attr("width"),height:t.attr("height")},points:{}};return r.forEach(function(i){var n={};H(i.series.dragDropProps,function(a,d){a=i.series[a.axis+"Axis"],n[d]=i[d],n[d+"Offset"]=a.toPixels(i[d])-(a.horiz?e.chartX:e.chartY)}),n.point=i,o.points[i.id]=n}),o}function _(e){var r=e.series,t=[],o=r.options.dragDrop.groupBy;return r.boosted?r.options.data.forEach(function(i,n){t.push(new r.pointClass().init(r,i)),t[t.length-1].index=n}):t=r.points,e.options[o]?t.filter(function(i){return i.options[o]===e.options[o]}):[e]}function I(e,r){var t=_(r),o=r.series,i=o.chart,n;F(o.options.dragDrop&&o.options.dragDrop.liveRedraw,!0)||(i.dragGuideBox=n=o.getGuideBox(t),i.setGuideBoxState("default",o.options.dragDrop.guideBox).add(o.group)),i.dragDropData={origin:W(e,t,n),point:r,groupedPoints:t,isDragging:!0}}function Q(e,r){var t=e.point,o=v(t.series.options.dragDrop,t.options.dragDrop),i={},n=e.updateProp,a={};return H(t.series.dragDropProps,function(d,s){(!n||n===s&&d.resize&&(!d.optionName||o[d.optionName]!==!1))&&(n||d.move&&(d.axis==="x"&&o.draggableX||d.axis==="y"&&o.draggableY))&&(i[s]=d)}),(n?[t]:e.groupedPoints).forEach(function(d){a[d.id]={point:d,newValues:d.getDropValues(e.origin,r,i)}}),a}function j(e,r){var t=e.dragDropData.newPoints;r=Z(r),e.isDragDropAnimating=!0,H(t,function(o){o.point.update(o.newValues,!1)}),e.redraw(r),setTimeout(function(){delete e.isDragDropAnimating,e.hoverPoint&&!e.dragHandles&&e.hoverPoint.showDragHandles()},r.duration)}function k(e){var r=e.series&&e.series.chart,t=r&&r.dragDropData;!r||!r.dragHandles||t&&(t.isDragging&&t.draggedPastSensitivity||t.isHoveringHandle===e.id)||r.hideDragHandles()}function G(e){var r=0,t;for(t in e)Object.hasOwnProperty.call(e,t)&&r++;return r}function q(e){for(var r in e)if(Object.hasOwnProperty.call(e,r))return e[r]}function $(e,r){if(!r.zoomOrPanKeyPressed(e)){var t=r.dragDropData,o=0;if(t&&t.isDragging&&t.point.series){var i=t.point;o=i.series.options.dragDrop,e.preventDefault(),t.draggedPastSensitivity||(t.draggedPastSensitivity=R(e,r,F(i.options.dragDrop&&i.options.dragDrop.dragSensitivity,o&&o.dragSensitivity,2))),t.draggedPastSensitivity&&(t.newPoints=Q(t,e),r=t.newPoints,o=G(r),r=o===1?q(r):null,i.firePointEvent("drag",{origin:t.origin,newPoints:t.newPoints,newPoint:r&&r.newValues,newPointId:r&&r.point.id,numNewPoints:o,chartX:e.chartX,chartY:e.chartY},function(){var n=i.series,a=n.chart,d=a.dragDropData,s=v(n.options.dragDrop,i.options.dragDrop),h=s.draggableX,g=s.draggableY;n=d.origin;var x=e.chartX-n.chartX,D=e.chartY-n.chartY,p=x;if(d=d.updateProp,a.inverted&&(x=-D,D=-p),F(s.liveRedraw,!0))j(a,!1),i.showDragHandles();else if(d){h=x,a=D,p=i.series,g=p.chart,d=g.dragDropData,s=p.dragDropProps[d.updateProp];var y=d.newPoints[i.id].newValues,A=typeof s.resizeSide=="function"?s.resizeSide(y,i):s.resizeSide;switch(s.beforeResize&&s.beforeResize(g.dragGuideBox,y,i),g=g.dragGuideBox,p=s.axis==="x"&&p.xAxis.reversed||s.axis==="y"&&p.yAxis.reversed?E(A):A,h=s.axis==="x"?h-(d.origin.prevdX||0):0,a=s.axis==="y"?a-(d.origin.prevdY||0):0,p){case"left":var M={x:g.attr("x")+h,width:Math.max(1,g.attr("width")-h)};break;case"right":M={width:Math.max(1,g.attr("width")+h)};break;case"top":M={y:g.attr("y")+a,height:Math.max(1,g.attr("height")-a)};break;case"bottom":M={height:Math.max(1,g.attr("height")+a)}}g.attr(M)}else a.dragGuideBox.translate(h?x:0,g?D:0);n.prevdX=x,n.prevdY=D}))}}}function O(e,r){var t=r.dragDropData;if(t&&t.isDragging&&t.draggedPastSensitivity&&t.point.series){var o=t.point,i=t.newPoints,n=G(i),a=n===1?q(i):null;r.dragHandles&&r.hideDragHandles(),e.preventDefault(),r.cancelClick=!0,o.firePointEvent("drop",{origin:t.origin,chartX:e.chartX,chartY:e.chartY,newPoints:i,numNewPoints:n,newPoint:a&&a.newValues,newPointId:a&&a.point.id},function(){j(r)})}delete r.dragDropData,r.dragGuideBox&&(r.dragGuideBox.destroy(),delete r.dragGuideBox)}function J(e){var r=e.container,t=S.doc;U(e)&&(V(r,["mousedown","touchstart"],function(o){o=X(o,e);var i=e.hoverPoint,n=v(i&&i.series.options.dragDrop,i&&i.options.dragDrop),a=n.draggableX||!1;n=n.draggableY||!1,e.cancelClick=!1,!a&&!n||e.zoomOrPanKeyPressed(o)||e.hasDraggedAnnotation||(e.dragDropData&&e.dragDropData.isDragging?O(o,e):i&&K(i)&&(e.mouseIsDown=!1,I(o,i),i.firePointEvent("dragStart",o)))}),V(r,["mousemove","touchmove"],function(o){$(X(o,e),e)},{passive:!1}),z(r,"mouseleave",function(o){O(X(o,e),e)}),e.unbindDragDropMouseUp=V(t,["mouseup","touchend"],function(o){O(X(o,e),e)},{passive:!1}),e.hasAddedDragDropEvents=!0,z(e,"destroy",function(){e.unbindDragDropMouseUp&&e.unbindDragDropMouseUp()}))}var Z=c.animObject,l=N.seriesTypes,z=P.addEvent,ee=P.clamp,re=P.isNumber,v=P.merge,H=P.objectEach,F=P.pick;c=function(e){e=e.shapeArgs||e.graphic.getBBox();var r=e.r||0,t=e.height/2;return[["M",0,r],["L",0,t-5],["A",1,1,0,0,0,0,t+5],["A",1,1,0,0,0,0,t-5],["M",0,t+5],["L",0,e.height-r]]},N=Y.prototype.dragDropProps={x:{axis:"x",move:!0},y:{axis:"y",move:!0}},l.flags&&(l.flags.prototype.dragDropProps=N);var f=l.column.prototype.dragDropProps={x:{axis:"x",move:!0},y:{axis:"y",move:!1,resize:!0,beforeResize:function(e,r,t){var o=t.series.translatedThreshold,i=e.attr("y");r.y>=t.series.options.threshold?(r=e.attr("height"),e.attr({height:Math.max(0,Math.round(r+(o?o-(i+r):0)))})):e.attr({y:Math.round(i+(o?o-i:0))})},resizeSide:function(e,r){var t=r.series.chart.dragHandles;return e=e.y>=(r.series.options.threshold||0)?"top":"bottom",r=E(e),t[r]&&(t[r].destroy(),delete t[r]),e},handlePositioner:function(e){var r=e.shapeArgs||e.graphic&&e.graphic.getBBox()||{},t=e.series.yAxis.reversed,o=e.series.options.threshold||0;return e=e.y||0,{x:r.x||0,y:!t&&e>=o||t&&e<o?r.y||0:(r.y||0)+(r.height||0)}},handleFormatter:function(e){var r=e.shapeArgs||{};e=r.r||0,r=r.width||0;var t=r/2;return[["M",e,0],["L",t-5,0],["A",1,1,0,0,0,t+5,0],["A",1,1,0,0,0,t-5,0],["M",t+5,0],["L",r-e,0]]}}};if(l.bullet&&(l.bullet.prototype.dragDropProps={x:f.x,y:f.y,target:{optionName:"draggableTarget",axis:"y",move:!0,resize:!0,resizeSide:"top",handlePositioner:function(e){var r=e.targetGraphic.getBBox();return{x:e.barX,y:r.y+r.height/2}},handleFormatter:f.y.handleFormatter}}),l.columnrange&&(l.columnrange.prototype.dragDropProps={x:{axis:"x",move:!0},low:{optionName:"draggableLow",axis:"y",move:!0,resize:!0,resizeSide:"bottom",handlePositioner:function(e){return e=e.shapeArgs||e.graphic.getBBox(),{x:e.x||0,y:(e.y||0)+(e.height||0)}},handleFormatter:f.y.handleFormatter,propValidate:function(e,r){return e<=r.high}},high:{optionName:"draggableHigh",axis:"y",move:!0,resize:!0,resizeSide:"top",handlePositioner:function(e){return e=e.shapeArgs||e.graphic.getBBox(),{x:e.x||0,y:e.y||0}},handleFormatter:f.y.handleFormatter,propValidate:function(e,r){return e>=r.low}}}),l.boxplot&&(l.boxplot.prototype.dragDropProps={x:f.x,low:{optionName:"draggableLow",axis:"y",move:!0,resize:!0,resizeSide:"bottom",handlePositioner:function(e){return{x:e.shapeArgs.x||0,y:e.lowPlot}},handleFormatter:f.y.handleFormatter,propValidate:function(e,r){return e<=r.q1}},q1:{optionName:"draggableQ1",axis:"y",move:!0,resize:!0,resizeSide:"bottom",handlePositioner:function(e){return{x:e.shapeArgs.x||0,y:e.q1Plot}},handleFormatter:f.y.handleFormatter,propValidate:function(e,r){return e<=r.median&&e>=r.low}},median:{axis:"y",move:!0},q3:{optionName:"draggableQ3",axis:"y",move:!0,resize:!0,resizeSide:"top",handlePositioner:function(e){return{x:e.shapeArgs.x||0,y:e.q3Plot}},handleFormatter:f.y.handleFormatter,propValidate:function(e,r){return e<=r.high&&e>=r.median}},high:{optionName:"draggableHigh",axis:"y",move:!0,resize:!0,resizeSide:"top",handlePositioner:function(e){return{x:e.shapeArgs.x||0,y:e.highPlot}},handleFormatter:f.y.handleFormatter,propValidate:function(e,r){return e>=r.q3}}}),l.ohlc&&(l.ohlc.prototype.dragDropProps={x:f.x,low:{optionName:"draggableLow",axis:"y",move:!0,resize:!0,resizeSide:"bottom",handlePositioner:function(e){return{x:e.shapeArgs.x,y:e.plotLow}},handleFormatter:f.y.handleFormatter,propValidate:function(e,r){return e<=r.open&&e<=r.close}},high:{optionName:"draggableHigh",axis:"y",move:!0,resize:!0,resizeSide:"top",handlePositioner:function(e){return{x:e.shapeArgs.x,y:e.plotHigh}},handleFormatter:f.y.handleFormatter,propValidate:function(e,r){return e>=r.open&&e>=r.close}},open:{optionName:"draggableOpen",axis:"y",move:!0,resize:!0,resizeSide:function(e){return e.open>=e.close?"top":"bottom"},handlePositioner:function(e){return{x:e.shapeArgs.x,y:e.plotOpen}},handleFormatter:f.y.handleFormatter,propValidate:function(e,r){return e<=r.high&&e>=r.low}},close:{optionName:"draggableClose",axis:"y",move:!0,resize:!0,resizeSide:function(e){return e.open>=e.close?"bottom":"top"},handlePositioner:function(e){return{x:e.shapeArgs.x,y:e.plotClose}},handleFormatter:f.y.handleFormatter,propValidate:function(e,r){return e<=r.high&&e>=r.low}}}),l.arearange&&(N=l.columnrange.prototype.dragDropProps,P=function(e){return e=e.graphic?e.graphic.getBBox().width/2+1:4,[["M",0-e,0],["a",e,e,0,1,0,2*e,0],["a",e,e,0,1,0,-2*e,0]]},l.arearange.prototype.dragDropProps={x:N.x,low:{optionName:"draggableLow",axis:"y",move:!0,resize:!0,resizeSide:"bottom",handlePositioner:function(e){return(e=e.graphics&&e.graphics[0]&&e.graphics[0].getBBox())?{x:e.x+e.width/2,y:e.y+e.height/2}:{x:-999,y:-999}},handleFormatter:P,propValidate:N.low.propValidate},high:{optionName:"draggableHigh",axis:"y",move:!0,resize:!0,resizeSide:"top",handlePositioner:function(e){return(e=e.graphics&&e.graphics[1]&&e.graphics[1].getBBox())?{x:e.x+e.width/2,y:e.y+e.height/2}:{x:-999,y:-999}},handleFormatter:P,propValidate:N.high.propValidate}}),l.waterfall&&(l.waterfall.prototype.dragDropProps={x:f.x,y:v(f.y,{handleFormatter:function(e){return e.isSum||e.isIntermediateSum?null:f.y.handleFormatter(e)}})}),l.xrange){var L=function(e,r){var t=e.series,o=t.xAxis,i=t.yAxis,n=t.chart.inverted;r=o.toPixels(e[r],!0);var a=i.toPixels(e.y,!0);return e=t.columnMetrics?t.columnMetrics.offset:-e.shapeArgs.height/2,n&&(r=o.len-r,a=i.len-a),{x:Math.round(r),y:Math.round(a+e)}};c=l.xrange.prototype.dragDropProps={y:{axis:"y",move:!0},x:{optionName:"draggableX1",axis:"x",move:!0,resize:!0,resizeSide:"left",handlePositioner:function(e){return L(e,"x")},handleFormatter:c,propValidate:function(e,r){return e<=r.x2}},x2:{optionName:"draggableX2",axis:"x",move:!0,resize:!0,resizeSide:"right",handlePositioner:function(e){return L(e,"x2")},handleFormatter:c,propValidate:function(e,r){return e>=r.x}}},l.gantt&&(l.gantt.prototype.dragDropProps={y:c.y,start:v(c.x,{optionName:"draggableStart",validateIndividualDrag:function(e){return!e.milestone}}),end:v(c.x2,{optionName:"draggableEnd",validateIndividualDrag:function(e){return!e.milestone}})})}"gauge pie sunburst wordcloud sankey histogram pareto vector windbarb treemap bellcurve sma map mapline".split(" ").forEach(function(e){l[e]&&(l[e].prototype.dragDropProps=null)});var te={default:{className:"highcharts-drag-box-default",lineWidth:1,lineColor:"#888",color:"rgba(0, 0, 0, 0.1)",cursor:"move",zIndex:900}},oe={className:"highcharts-drag-handle",color:"#fff",lineColor:"rgba(0, 0, 0, 0.6)",lineWidth:1,zIndex:901};m.prototype.setGuideBoxState=function(e,r){var t=this.dragGuideBox;return r=v(te,r),e=v(r.default,r[e]),t.attr({className:e.className,stroke:e.lineColor,strokeWidth:e.lineWidth,fill:e.color,cursor:e.cursor,zIndex:e.zIndex}).css({pointerEvents:"none"})},b.prototype.getDropValues=function(e,r,t){var o=this,i=o.series,n=v(i.options.dragDrop,o.options.dragDrop),a={},d=e.points[o.id],s;for(s in t)if(Object.hasOwnProperty.call(t,s)){if(typeof h<"u"){var h=!1;break}h=!0}return H(t,function(g,x){var D=d[x],p=i[g.axis+"Axis"];p=p.toValue((p.horiz?r.chartX:r.chartY)+d[x+"Offset"]);var y=g.axis.toUpperCase(),A=i[y.toLowerCase()+"Axis"].categories?1:0;A=F(n["dragPrecision"+y],A);var M=F(n["dragMin"+y],-1/0);y=F(n["dragMax"+y],1/0),A&&(p=Math.round(p/A)*A),p=ee(p,M,y),h&&g.propValidate&&!g.propValidate(p,o)||typeof D>"u"||(a[x]=p)}),a},Y.prototype.getGuideBox=function(e){var r=this.chart,t=1/0,o=-1/0,i=1/0,n=-1/0,a;return e.forEach(function(d){var s=d.graphic&&d.graphic.getBBox()||d.shapeArgs;if(s){var h=void 0,g=d.x2;re(g)&&(h=d.series.xAxis.translate(g,!1,!1,!1,!0)),g=!(s.width||s.height||s.x||s.y),a=!0,t=Math.min(d.plotX||0,h||0,g?1/0:s.x||0,t),o=Math.max(d.plotX||0,h||0,(s.x||0)+(s.width||0),o),i=Math.min(d.plotY||0,g?1/0:s.y||0,i),n=Math.max((s.y||0)+(s.height||0),n)}}),a?r.renderer.rect(t,i,o-t,n-i):r.renderer.g()},b.prototype.showDragHandles=function(){var e=this,r=e.series,t=r.chart,o=t.inverted,i=t.renderer,n=v(r.options.dragDrop,e.options.dragDrop);H(r.dragDropProps,function(a,d){var s=v(oe,a.handleOptions,n.dragHandle),h={class:s.className,"stroke-width":s.lineWidth,fill:s.color,stroke:s.lineColor},g=s.pathFormatter||a.handleFormatter,x=a.handlePositioner,D=a.validateIndividualDrag?a.validateIndividualDrag(e):!0;a.resize&&D&&a.resizeSide&&g&&(n["draggable"+a.axis.toUpperCase()]||n[a.optionName])&&n[a.optionName]!==!1&&(t.dragHandles||(t.dragHandles={group:i.g("drag-drop-handles").add(r.markerGroup||r.group)}),t.dragHandles.point=e.id,x=x(e),h.d=g=g(e),D=e.series.xAxis.categories?-.5:0,!g||x.x<D||0>x.y||(h.cursor=s.cursor||(a.axis==="x"!=!!o?"ew-resize":"ns-resize"),(s=t.dragHandles[a.optionName])||(s=t.dragHandles[a.optionName]=i.path().add(t.dragHandles.group)),h.translateX=o?r.yAxis.len-x.y:x.x,h.translateY=o?r.xAxis.len-x.x:x.y,o&&(h.rotation=-90),s.attr(h),V(s.element,["touchstart","mousedown"],function(p){p=X(p,t);var y=e.series.chart;y.zoomOrPanKeyPressed(p)||(y.mouseIsDown=!1,I(p,e),y.dragDropData.updateProp=p.updateProp=d,e.firePointEvent("dragStart",p),p.stopPropagation(),p.preventDefault())},{passive:!1}),z(t.dragHandles.group.element,"mouseover",function(){t.dragDropData=t.dragDropData||{},t.dragDropData.isHoveringHandle=e.id}),V(t.dragHandles.group.element,["touchend","mouseout"],function(){var p=e.series.chart;p.dragDropData&&e.id===p.dragDropData.isHoveringHandle&&delete p.dragDropData.isHoveringHandle,p.hoverPoint||k(e)})))})},m.prototype.hideDragHandles=function(){this.dragHandles&&(H(this.dragHandles,function(e,r){r!=="group"&&e.destroy&&e.destroy()}),this.dragHandles.group&&this.dragHandles.group.destroy&&this.dragHandles.group.destroy(),delete this.dragHandles)},z(b,"mouseOver",function(){var e=this;setTimeout(function(){var r=e.series,t=r&&r.chart,o=t&&t.dragDropData,i=t&&t.is3d&&t.is3d();!t||o&&o.isDragging&&o.draggedPastSensitivity||t.isDragDropAnimating||!r.options.dragDrop||i||(t.dragHandles&&t.hideDragHandles(),e.showDragHandles())},12)}),z(b,"mouseOut",function(){var e=this;setTimeout(function(){e.series&&k(e)},10)}),z(b,"remove",function(){var e=this.series.chart,r=e.dragHandles;r&&r.point===this.id&&e.hideDragHandles()}),m.prototype.zoomOrPanKeyPressed=function(e){var r=this.options.chart||{},t=r.panKey&&r.panKey+"Key";return e[r.zooming.key&&r.zooming.key+"Key"]||e[t]},z(m,"render",function(){this.hasAddedDragDropEvents||J(this)})}),B(u,"masters/modules/draggable-points.src.js",[],function(){})})})(ne);const ae=C,se=ie({__proto__:null,default:ae},[C]);export{se as d};
