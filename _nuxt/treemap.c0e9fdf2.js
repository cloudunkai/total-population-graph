function rt(X,v){for(var U=0;U<v.length;U++){const b=v[U];if(typeof b!="string"&&!Array.isArray(b)){for(const c in b)if(c!=="default"&&!(c in X)){const f=Object.getOwnPropertyDescriptor(b,c);f&&Object.defineProperty(X,c,f.get?f:{enumerable:!0,get:()=>b[c]})}}}return Object.freeze(Object.defineProperty(X,Symbol.toStringTag,{value:"Module"}))}var $={},st={get exports(){return $},set exports(X){$=X}};(function(X){(function(v){X.exports?(v.default=v,X.exports=v):v(typeof Highcharts<"u"?Highcharts:void 0)})(function(v){function U(b,c,f,L){b.hasOwnProperty(c)||(b[c]=L.apply(null,f),typeof CustomEvent=="function"&&window.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:c,module:b[c]}})))}v=v?v._modules:{},U(v,"Series/ColorMapComposition.js",[v["Core/Series/SeriesRegistry.js"],v["Core/Utilities.js"]],function(b,c){var f=b.seriesTypes.column.prototype,L=c.addEvent,O=c.defined,S;return function(A){function C(s){this.moveToTopOnHover&&this.graphic&&this.graphic.attr({zIndex:s&&s.state==="hover"?1:0})}var B=[];A.pointMembers={dataLabelOnNull:!0,moveToTopOnHover:!0,isValid:function(){return this.value!==null&&this.value!==1/0&&this.value!==-1/0&&(this.value===void 0||!isNaN(this.value))}},A.seriesMembers={colorKey:"value",axisTypes:["xAxis","yAxis","colorAxis"],parallelArrays:["x","y","value"],pointArrayMap:["value"],trackerGroups:["group","markerGroup","dataLabelsGroup"],colorAttribs:function(s){var p={};return!O(s.color)||s.state&&s.state!=="normal"||(p[this.colorProp||"fill"]=s.color),p},pointAttribs:f.pointAttribs},A.compose=function(s){var p=s.prototype.pointClass;return B.indexOf(p)===-1&&(B.push(p),L(p,"afterSetState",C)),s}}(S||(S={})),S}),U(v,"Series/Treemap/TreemapAlgorithmGroup.js",[],function(){return function(){function b(c,f,L,O){this.height=c,this.width=f,this.plot=O,this.startDirection=this.direction=L,this.lH=this.nH=this.lW=this.nW=this.total=0,this.elArr=[],this.lP={total:0,lH:0,nH:0,lW:0,nW:0,nR:0,lR:0,aspectRatio:function(S,A){return Math.max(S/A,A/S)}}}return b.prototype.addElement=function(c){this.lP.total=this.elArr[this.elArr.length-1],this.total+=c,this.direction===0?(this.lW=this.nW,this.lP.lH=this.lP.total/this.lW,this.lP.lR=this.lP.aspectRatio(this.lW,this.lP.lH),this.nW=this.total/this.height,this.lP.nH=this.lP.total/this.nW,this.lP.nR=this.lP.aspectRatio(this.nW,this.lP.nH)):(this.lH=this.nH,this.lP.lW=this.lP.total/this.lH,this.lP.lR=this.lP.aspectRatio(this.lP.lW,this.lH),this.nH=this.total/this.width,this.lP.nW=this.lP.total/this.nH,this.lP.nR=this.lP.aspectRatio(this.lP.nW,this.nH)),this.elArr.push(c)},b.prototype.reset=function(){this.lW=this.nW=0,this.elArr=[],this.total=0},b}()}),U(v,"Series/DrawPointUtilities.js",[v["Core/Utilities.js"]],function(b){return{draw:function(c,f){var L=f.animatableAttribs,O=f.onComplete,S=f.css,A=f.renderer,C=c.series&&c.series.chart.hasRendered?void 0:c.series&&c.series.options.animation,B=c.graphic;if(f.attribs=f.attribs||{},f.attribs.class=c.getClassName(),c.shouldDraw())B||(c.graphic=B=f.shapeType==="text"?A.text():A[f.shapeType](f.shapeArgs||{}),B.add(f.group)),S&&B.css(S),B.attr(f.attribs).animate(L,f.isNew?!1:C,O);else if(B){var s=function(){c.graphic=B=B&&B.destroy(),typeof O=="function"&&O()};Object.keys(L).length?B.animate(L,void 0,function(){return s()}):s()}}}}),U(v,"Series/Treemap/TreemapPoint.js",[v["Series/DrawPointUtilities.js"],v["Core/Series/SeriesRegistry.js"],v["Core/Utilities.js"]],function(b,c,f){var L=this&&this.__extends||function(){var s=function(p,x){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(I,h){I.__proto__=h}||function(I,h){for(var r in h)h.hasOwnProperty(r)&&(I[r]=h[r])},s(p,x)};return function(p,x){function I(){this.constructor=p}s(p,x),p.prototype=x===null?Object.create(x):(I.prototype=x.prototype,new I)}}(),O=c.series.prototype.pointClass,S=c.seriesTypes;c=S.pie.prototype.pointClass;var A=f.extend,C=f.isNumber,B=f.pick;return f=function(s){function p(){var x=s!==null&&s.apply(this,arguments)||this;return x.name=void 0,x.node=void 0,x.options=void 0,x.series=void 0,x.shapeType="rect",x.value=void 0,x}return L(p,s),p.prototype.draw=function(x){b.draw(this,x)},p.prototype.getClassName=function(){var x=O.prototype.getClassName.call(this),I=this.series,h=I.options;return this.node.level<=I.nodeMap[I.rootNode].level?x+=" highcharts-above-level":this.node.isLeaf||B(h.interactByLeaf,!h.allowTraversingTree)?this.node.isLeaf||(x+=" highcharts-internal-node"):x+=" highcharts-internal-node-interactive",x},p.prototype.isValid=function(){return!(!this.id&&!C(this.value))},p.prototype.setState=function(x){O.prototype.setState.call(this,x),this.graphic&&this.graphic.attr({zIndex:x==="hover"?1:0})},p.prototype.shouldDraw=function(){return C(this.plotY)&&this.y!==null},p}(S.scatter.prototype.pointClass),A(f.prototype,{setVisible:c.prototype.setVisible}),f}),U(v,"Series/Treemap/TreemapUtilities.js",[v["Core/Utilities.js"]],function(b){var c=b.objectEach,f;return function(L){function O(S,A,C){C===void 0&&(C=this),S=A.call(C,S),S!==!1&&O(S,A,C)}L.AXIS_MAX=100,L.isBoolean=function(S){return typeof S=="boolean"},L.eachObject=function(S,A,C){C=C||this,c(S,function(B,s){A.call(C,B,s,S)})},L.recursive=O}(f||(f={})),f}),U(v,"Series/TreeUtilities.js",[v["Core/Color/Color.js"],v["Core/Utilities.js"]],function(b,c){function f(s,p){var x=p.before,I=p.idRoot,h=p.mapIdToNode[I],r=p.points[s.i],a=r&&r.options||{},u=[],y=0;return s.levelDynamic=s.level-(p.levelIsConstant!==!1?0:h.level),s.name=B(r&&r.name,""),s.visible=I===s.id||p.visible===!0,typeof x=="function"&&(s=x(s,p)),s.children.forEach(function(j,M){var R=L({},p);L(R,{index:M,siblings:s.children.length,visible:s.visible}),j=f(j,R),u.push(j),j.visible&&(y+=j.val)}),x=B(a.value,y),s.visible=0<=x&&(0<y||s.visible),s.children=u,s.childrenTotal=y,s.isLeaf=s.visible&&!y,s.val=x,s}var L=c.extend,O=c.isArray,S=c.isNumber,A=c.isObject,C=c.merge,B=c.pick;return{getColor:function(s,p){var x=p.index,I=p.mapOptionsToLevel,h=p.parentColor,r=p.parentColorIndex,a=p.series,u=p.colors,y=p.siblings,j=a.points,M=a.chart.options.chart,R;if(s){if(j=j[s.i],s=I[s.level]||{},I=j&&s.colorByPoint)var E=j.index%(u?u.length:M.colorCount),D=u&&u[E];a.chart.styledMode||(u=j&&j.options.color,M=s&&s.color,(R=h)&&(R=(R=s&&s.colorVariation)&&R.key==="brightness"&&x&&y?b.parse(h).brighten(x/y*R.to).get():h),R=B(u,M,D,R,a.color));var N=B(j&&j.options.colorIndex,s&&s.colorIndex,E,r,p.colorIndex)}return{color:R,colorIndex:N}},getLevelOptions:function(s){var p={};if(A(s)){var x=S(s.from)?s.from:1,I=s.levels,h={},r=A(s.defaults)?s.defaults:{};for(O(I)&&(h=I.reduce(function(a,u){if(A(u)&&S(u.level)){var y=C({},u),j=B(y.levelIsConstant,r.levelIsConstant);delete y.levelIsConstant,delete y.level,u=u.level+(j?0:x-1),A(a[u])?C(!0,a[u],y):a[u]=y}return a},{})),I=S(s.to)?s.to:1,s=0;s<=I;s++)p[s]=C({},r,A(h[s])?h[s]:{})}return p},setTreeValues:f,updateRootId:function(s){if(A(s)){var p=A(s.options)?s.options:{};p=B(s.rootNode,p.rootId,""),A(s.userOptions)&&(s.userOptions.rootId=p),s.rootNode=p}return p}}}),U(v,"Extensions/Breadcrumbs.js",[v["Core/Chart/Chart.js"],v["Core/Defaults.js"],v["Core/Globals.js"],v["Core/Utilities.js"],v["Core/FormatUtilities.js"]],function(b,c,f,L,O){var S=O.format;O=L.addEvent;var A=L.objectEach,C=L.extend,B=L.fireEvent,s=L.merge,p=L.pick,x=L.defined,I=L.isString;return C(c.defaultOptions.lang,{mainBreadcrumb:"Main"}),c=function(){function h(r,a){this.group=void 0,this.list=[],this.elementList={},this.isDirty=!0,this.level=0,this.options=void 0,a=s(r.options.drilldown&&r.options.drilldown.drillUpButton,h.defaultBreadcrumbsOptions,r.options.navigation&&r.options.navigation.breadcrumbs,a),this.chart=r,this.options=a||{}}return h.prototype.updateProperties=function(r){this.setList(r),this.setLevel(),this.isDirty=!0},h.prototype.setList=function(r){this.list=r},h.prototype.setLevel=function(){this.level=this.list.length&&this.list.length-1},h.prototype.getLevel=function(){return this.level},h.prototype.getButtonText=function(r){var a=this.chart,u=this.options,y=a.options.lang,j=p(u.format,u.showFullPath?"{level.name}":"← {level.name}");return y=y&&p(y.drillUpText,y.mainBreadcrumb),r=u.formatter&&u.formatter(r)||S(j,{level:r.levelOptions},a)||"",(I(r)&&!r.length||r==="← ")&&x(y)&&(r=u.showFullPath?y:"← "+y),r},h.prototype.redraw=function(){this.isDirty&&this.render(),this.group&&this.group.align(),this.isDirty=!1},h.prototype.render=function(){var r=this.chart,a=this.options;!this.group&&a&&(this.group=r.renderer.g("breadcrumbs-group").addClass("highcharts-no-tooltip highcharts-breadcrumbs").attr({zIndex:a.zIndex}).add()),a.showFullPath?this.renderFullPathButtons():this.renderSingleButton(),this.alignBreadcrumbsGroup()},h.prototype.renderFullPathButtons=function(){this.destroySingleButton(),this.resetElementListState(),this.updateListElements(),this.destroyListElements()},h.prototype.renderSingleButton=function(){var r=this.chart,a=this.list,u=this.options.buttonSpacing;this.destroyListElements();var y=this.group?this.group.getBBox().width:u;a=a[a.length-2],!r.drillUpButton&&0<this.level?r.drillUpButton=this.renderButton(a,y,u):r.drillUpButton&&(0<this.level?this.updateSingleButton():this.destroySingleButton())},h.prototype.alignBreadcrumbsGroup=function(r){if(this.group){var a=this.options,u=a.buttonTheme,y=a.position,j=a.relativeTo==="chart"||a.relativeTo==="spacingBox"?void 0:"scrollablePlotBox",M=this.group.getBBox();a=2*(u.padding||0)+a.buttonSpacing,y.width=M.width+a,y.height=M.height+a,M=s(y),r&&(M.x+=r),this.options.rtl&&(M.x+=y.width),M.y=p(M.y,this.yOffset,0),this.group.align(M,!0,j)}},h.prototype.renderButton=function(r,a,u){var y=this,j=this.chart,M=y.options,R=s(M.buttonTheme);return a=j.renderer.button(y.getButtonText(r),a,u,function(E){var D=M.events&&M.events.click,N;D&&(N=D.call(y,E,r)),N!==!1&&(E.newLevel=M.showFullPath?r.level:y.level-1,B(y,"up",E))},R).addClass("highcharts-breadcrumbs-button").add(y.group),j.styledMode||a.attr(M.style),a},h.prototype.renderSeparator=function(r,a){var u=this.chart,y=this.options.separator;return r=u.renderer.label(y.text,r,a,void 0,void 0,void 0,!1).addClass("highcharts-breadcrumbs-separator").add(this.group),u.styledMode||r.css(y.style),r},h.prototype.update=function(r){s(!0,this.options,r),this.destroy(),this.isDirty=!0},h.prototype.updateSingleButton=function(){var r=this.chart,a=this.list[this.level-1];r.drillUpButton&&r.drillUpButton.attr({text:this.getButtonText(a)})},h.prototype.destroy=function(){this.destroySingleButton(),this.destroyListElements(!0),this.group&&this.group.destroy(),this.group=void 0},h.prototype.destroyListElements=function(r){var a=this.elementList;A(a,function(u,y){(r||!a[y].updated)&&(u=a[y],u.button&&u.button.destroy(),u.separator&&u.separator.destroy(),delete u.button,delete u.separator,delete a[y])}),r&&(this.elementList={})},h.prototype.destroySingleButton=function(){this.chart.drillUpButton&&(this.chart.drillUpButton.destroy(),this.chart.drillUpButton=void 0)},h.prototype.resetElementListState=function(){A(this.elementList,function(r){r.updated=!1})},h.prototype.updateListElements=function(){var r=this,a=r.elementList,u=r.options.buttonSpacing,y=r.list,j=r.options.rtl,M=j?-1:1,R=function(N,V){return M*N.getBBox().width+M*V},E=r.group?R(r.group,u):u,D;y.forEach(function(N,V){if(V=V===y.length-1,a[N.level]){D=a[N.level];var _=D.button;if(D.separator||V)D.separator&&V&&(D.separator.destroy(),delete D.separator);else{if(E+=M*u,D.separator=r.renderSeparator(E,u),j){var F=D.separator;F.translate(E-F.getBBox().width,u)}E+=R(D.separator,u)}a[N.level].updated=!0}else _=r.renderButton(N,E,u),j&&_.translate(E-_.getBBox().width,u),E+=R(_,u),V||(F=r.renderSeparator(E,u),j&&F.translate(E-F.getBBox().width,u),E+=R(F,u)),a[N.level]={button:_,separator:F,updated:!0};_&&_.setState(V?2:0)})},h.defaultBreadcrumbsOptions={buttonTheme:{fill:"none",height:18,padding:2,"stroke-width":0,zIndex:7,states:{select:{fill:"none"}},style:{color:"#335cad"}},buttonSpacing:5,floating:!1,format:void 0,relativeTo:"plotBox",rtl:!1,position:{align:"left",verticalAlign:"top",x:0,y:void 0},separator:{text:"/",style:{color:"#666666"}},showFullPath:!0,style:{},useHTML:!1,zIndex:7},h}(),f.Breadcrumbs||(f.Breadcrumbs=c,O(b,"getMargins",function(){var h=this.breadcrumbs;if(h&&!h.options.floating&&h.level){var r=h.options,a=r.buttonTheme;a=(a.height||0)+2*(a.padding||0)+r.buttonSpacing,r=r.position.verticalAlign,r==="bottom"?(this.marginBottom=(this.marginBottom||0)+a,h.yOffset=a):r!=="middle"?(this.plotTop+=a,h.yOffset=-a):h.yOffset=void 0}}),O(b,"redraw",function(){this.breadcrumbs&&this.breadcrumbs.redraw()}),O(b,"destroy",function(){this.breadcrumbs&&(this.breadcrumbs.destroy(),this.breadcrumbs=void 0)}),O(b,"afterShowResetZoom",function(){if(this.breadcrumbs){var h=this.resetZoomButton&&this.resetZoomButton.getBBox(),r=this.breadcrumbs.options;h&&r.position.align==="right"&&r.relativeTo==="plotBox"&&this.breadcrumbs.alignBreadcrumbsGroup(-h.width-r.buttonSpacing)}}),O(b,"selection",function(h){h.resetSelection===!0&&this.breadcrumbs&&this.breadcrumbs.alignBreadcrumbsGroup()})),c}),U(v,"Series/Treemap/TreemapComposition.js",[v["Core/Series/SeriesRegistry.js"],v["Series/Treemap/TreemapUtilities.js"],v["Core/Utilities.js"]],function(b,c,f){var L=f.addEvent,O=f.extend,S=!1;L(b.series,"afterBindAxes",function(){var A=this.xAxis,C=this.yAxis;if(A&&C)if(this.is("treemap")){var B={endOnTick:!1,gridLineWidth:0,lineWidth:0,min:0,minPadding:0,max:c.AXIS_MAX,maxPadding:0,startOnTick:!1,title:void 0,tickPositions:[]};O(C.options,B),O(A.options,B),S=!0}else S&&(C.setOptions(C.userOptions),A.setOptions(A.userOptions),S=!1)})}),U(v,"Series/Treemap/TreemapNode.js",[],function(){return function(){function b(){this.childrenTotal=0,this.visible=!1}return b.prototype.init=function(c,f,L,O,S,A,C){return this.id=c,this.i=f,this.children=L,this.height=O,this.level=S,this.series=A,this.parent=C,this},b}()}),U(v,"Series/Treemap/TreemapSeries.js",[v["Core/Color/Color.js"],v["Series/ColorMapComposition.js"],v["Core/Globals.js"],v["Core/Legend/LegendSymbol.js"],v["Core/Series/SeriesRegistry.js"],v["Series/Treemap/TreemapAlgorithmGroup.js"],v["Series/Treemap/TreemapPoint.js"],v["Series/Treemap/TreemapUtilities.js"],v["Series/TreeUtilities.js"],v["Extensions/Breadcrumbs.js"],v["Core/Utilities.js"],v["Series/Treemap/TreemapNode.js"]],function(b,c,f,L,O,S,A,C,B,s,p,x){var I=this&&this.__extends||function(){var K=function(T,t){return K=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,o){e.__proto__=o}||function(e,o){for(var d in o)o.hasOwnProperty(d)&&(e[d]=o[d])},K(T,t)};return function(T,t){function e(){this.constructor=T}K(T,t),T.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),h=b.parse;b=f.noop;var r=O.series;f=O.seriesTypes;var a=f.column,u=f.heatmap,y=f.scatter,j=B.getColor,M=B.getLevelOptions,R=B.updateRootId,E=p.addEvent,D=p.correctFloat,N=p.defined,V=p.error,_=p.extend,F=p.fireEvent,Q=p.isArray,et=p.isObject,J=p.isString,z=p.merge,G=p.pick,ot=p.stableSort;return B=function(K){function T(){var t=K!==null&&K.apply(this,arguments)||this;return t.axisRatio=void 0,t.data=void 0,t.mapOptionsToLevel=void 0,t.nodeMap=void 0,t.nodeList=void 0,t.options=void 0,t.points=void 0,t.rootNode=void 0,t.tree=void 0,t.level=void 0,t}return I(T,K),T.prototype.algorithmCalcPoints=function(t,e,o,d){var n,i,l,m,w=o.lW,P=o.lH,g=o.plot,W=0,k=o.elArr.length-1;if(e)w=o.nW,P=o.nH;else var H=o.elArr[o.elArr.length-1];o.elArr.forEach(function(Y){(e||W<k)&&(o.direction===0?(n=g.x,i=g.y,l=w,m=Y/l):(n=g.x,i=g.y,m=P,l=Y/m),d.push({x:n,y:i,width:l,height:D(m)}),o.direction===0?g.y+=m:g.x+=l),W+=1}),o.reset(),o.direction===0?o.width-=w:o.height-=P,g.y=g.parent.y+(g.parent.height-o.height),g.x=g.parent.x+(g.parent.width-o.width),t&&(o.direction=1-o.direction),e||o.addElement(H)},T.prototype.algorithmFill=function(t,e,o){var d=[],n,i=e.direction,l=e.x,m=e.y,w=e.width,P=e.height,g,W,k,H;return o.forEach(function(Y){n=Y.val/e.val*e.height*e.width,g=l,W=m,i===0?(H=P,k=n/H,w-=k,l+=k):(k=w,H=n/k,P-=H,m+=H),d.push({x:g,y:W,width:k,height:H}),t&&(i=1-i)}),d},T.prototype.algorithmLowAspectRatio=function(t,e,o){var d=[],n=this,i,l={x:e.x,y:e.y,parent:e},m=0,w=o.length-1,P=new S(e.height,e.width,e.direction,l);return o.forEach(function(g){i=g.val/e.val*e.height*e.width,P.addElement(i),P.lP.nR>P.lP.lR&&n.algorithmCalcPoints(t,!1,P,d,l),m===w&&n.algorithmCalcPoints(t,!0,P,d,l),m+=1}),d},T.prototype.alignDataLabel=function(t,e,o){var d=o.style;d&&!N(d.textOverflow)&&e.text&&e.getBBox().width>e.text.textWidth&&e.css({textOverflow:"ellipsis",width:d.width+="px"}),a.prototype.alignDataLabel.apply(this,arguments),t.dataLabel&&t.dataLabel.attr({zIndex:(t.node.zIndex||0)+1})},T.prototype.calculateChildrenAreas=function(t,e){var o=this,d=o.options,n=o.mapOptionsToLevel[t.level+1],i=G(o[n&&n.layoutAlgorithm]&&n.layoutAlgorithm,d.layoutAlgorithm),l=d.alternateStartingDirection,m=[];t=t.children.filter(function(w){return!w.ignore}),n&&n.layoutStartingDirection&&(e.direction=n.layoutStartingDirection==="vertical"?0:1),m=o[i](e,t),t.forEach(function(w,P){P=m[P],w.values=z(P,{val:w.childrenTotal,direction:l?1-e.direction:e.direction}),w.pointValues=z(P,{x:P.x/o.axisRatio,y:C.AXIS_MAX-P.y-P.height,width:P.width/o.axisRatio}),w.children.length&&o.calculateChildrenAreas(w,w.values)})},T.prototype.createList=function(t){var e=this.chart,o=[];if(e.breadcrumbs){var d=0;o.push({level:d,levelOptions:e.series[0]}),e=t.target.nodeMap[t.newRootId];for(var n=[];e.parent||e.parent==="";)n.push(e),e=t.target.nodeMap[e.parent];n.reverse().forEach(function(i){o.push({level:++d,levelOptions:i})}),1>=o.length&&(o.length=0)}return o},T.prototype.drawDataLabels=function(){var t=this,e=t.mapOptionsToLevel,o,d;t.points.filter(function(n){return n.node.visible}).forEach(function(n){d=e[n.node.level],o={style:{}},n.node.isLeaf||(o.enabled=!1),d&&d.dataLabels&&(o=z(o,d.dataLabels),t._hasPointLabels=!0),n.shapeArgs&&(o.style.width=n.shapeArgs.width,n.dataLabel&&n.dataLabel.css({width:n.shapeArgs.width+"px"})),n.dlOptions=z(o,n.options.dataLabels)}),r.prototype.drawDataLabels.call(this)},T.prototype.drawPoints=function(t){t===void 0&&(t=this.points);var e=this,o=e.chart,d=o.renderer,n=o.styledMode,i=e.options,l=n?{}:i.shadow,m=i.borderRadius,w=o.pointCount<i.animationLimit,P=i.allowTraversingTree;t.forEach(function(g){var W=g.node.levelDynamic,k={},H={},Y={},Z="level-group-"+g.node.level,q=!!g.graphic,it=w&&q,tt=g.shapeArgs;g.shouldDraw()&&(g.isInside=!0,m&&(H.r=m),z(!0,it?k:H,q?tt:{},n?{}:e.pointAttribs(g,g.selected?"select":void 0)),e.colorAttribs&&n&&_(Y,e.colorAttribs(g)),e[Z]||(e[Z]=d.g(Z).attr({zIndex:1e3-(W||0)}).add(e.group),e[Z].survive=!0)),g.draw({animatableAttribs:k,attribs:H,css:Y,group:e[Z],renderer:d,shadow:l,shapeArgs:tt,shapeType:g.shapeType}),P&&g.graphic&&(g.drillId=i.interactByLeaf?e.drillToByLeaf(g):e.drillToByGroup(g))})},T.prototype.drillToByGroup=function(t){var e=!1;return t.node.level-this.nodeMap[this.rootNode].level!==1||t.node.isLeaf||(e=t.id),e},T.prototype.drillToByLeaf=function(t){var e=!1;if(t.node.parent!==this.rootNode&&t.node.isLeaf)for(t=t.node;!e;)t=this.nodeMap[t.parent],t.parent===this.rootNode&&(e=t.id);return e},T.prototype.drillToNode=function(t,e){V(32,!1,void 0,{"treemap.drillToNode":"use treemap.setRootNode"}),this.setRootNode(t,e)},T.prototype.drillUp=function(){var t=this.nodeMap[this.rootNode];t&&J(t.parent)&&this.setRootNode(t.parent,!0,{trigger:"traverseUpButton"})},T.prototype.getExtremes=function(){var t=r.prototype.getExtremes.call(this,this.colorValueData),e=t.dataMax;return this.valueMin=t.dataMin,this.valueMax=e,r.prototype.getExtremes.call(this)},T.prototype.getListOfParents=function(t,e){t=Q(t)?t:[];var o=Q(e)?e:[];return e=t.reduce(function(d,n,i){return n=G(n.parent,""),typeof d[n]>"u"&&(d[n]=[]),d[n].push(i),d},{"":[]}),C.eachObject(e,function(d,n,i){n!==""&&o.indexOf(n)===-1&&(d.forEach(function(l){i[""].push(l)}),delete i[n])}),e},T.prototype.getTree=function(){var t=this.data.map(function(e){return e.id});return t=this.getListOfParents(this.data,t),this.nodeMap={},this.nodeList=[],this.buildTree("",-1,0,t)},T.prototype.buildTree=function(t,e,o,d,n){var i=this,l=[],m=i.points[e],w=0,P;(d[t]||[]).forEach(function(W){P=i.buildTree(i.points[W].id,W,o+1,d,t),w=Math.max(P.height+1,w),l.push(P)});var g=new i.NodeClass().init(t,e,l,w,o,i,n);return l.forEach(function(W){W.parentNode=g}),i.nodeMap[g.id]=g,i.nodeList.push(g),m&&(m.node=g,g.point=m),g},T.prototype.hasData=function(){return!!this.processedXData.length},T.prototype.init=function(t,e){var o=this,d=z(e.drillUpButton,e.breadcrumbs),n=E(o,"setOptions",function(i){i=i.userOptions,N(i.allowDrillToNode)&&!N(i.allowTraversingTree)&&(i.allowTraversingTree=i.allowDrillToNode,delete i.allowDrillToNode),N(i.drillUpButton)&&!N(i.traverseUpButton)&&(i.traverseUpButton=i.drillUpButton,delete i.drillUpButton)});r.prototype.init.call(o,t,e),delete o.opacity,o.eventsToUnbind.push(n),o.options.allowTraversingTree&&(o.eventsToUnbind.push(E(o,"click",o.onClickDrillToNode)),o.eventsToUnbind.push(E(o,"setRootNode",function(i){var l=o.chart;l.breadcrumbs&&l.breadcrumbs.updateProperties(o.createList(i))})),o.eventsToUnbind.push(E(o,"update",function(i,l){(l=this.chart.breadcrumbs)&&i.options.breadcrumbs&&l.update(i.options.breadcrumbs)})),o.eventsToUnbind.push(E(o,"destroy",function(i){var l=this.chart;l.breadcrumbs&&(l.breadcrumbs.destroy(),i.keepEventsForUpdate||(l.breadcrumbs=void 0))}))),t.breadcrumbs||(t.breadcrumbs=new s(t,d)),o.eventsToUnbind.push(E(t.breadcrumbs,"up",function(i){i=this.level-i.newLevel;for(var l=0;l<i;l++)o.drillUp()}))},T.prototype.onClickDrillToNode=function(t){var e=(t=t.point)&&t.drillId;J(e)&&(t.setState(""),this.setRootNode(e,!0,{trigger:"click"}))},T.prototype.pointAttribs=function(t,e){var o=et(this.mapOptionsToLevel)?this.mapOptionsToLevel:{},d=t&&o[t.node.level]||{};o=this.options;var n=e&&o.states&&o.states[e]||{},i=t&&t.getClassName()||"";return t={stroke:t&&t.borderColor||d.borderColor||n.borderColor||o.borderColor,"stroke-width":G(t&&t.borderWidth,d.borderWidth,n.borderWidth,o.borderWidth),dashstyle:t&&t.borderDashStyle||d.borderDashStyle||n.borderDashStyle||o.borderDashStyle,fill:t&&t.color||this.color},i.indexOf("highcharts-above-level")!==-1?(t.fill="none",t["stroke-width"]=0):i.indexOf("highcharts-internal-node-interactive")!==-1?(e=G(n.opacity,o.opacity),t.fill=h(t.fill).setOpacity(e).get(),t.cursor="pointer"):i.indexOf("highcharts-internal-node")!==-1?t.fill="none":e&&(t.fill=h(t.fill).brighten(n.brightness).get()),t},T.prototype.setColorRecursive=function(t,e,o,d,n){var i=this,l=i&&i.chart;if(l=l&&l.options&&l.options.colors,t){var m=j(t,{colors:l,index:d,mapOptionsToLevel:i.mapOptionsToLevel,parentColor:e,parentColorIndex:o,series:i,siblings:n});(e=i.points[t.i])&&(e.color=m.color,e.colorIndex=m.colorIndex),(t.children||[]).forEach(function(w,P){i.setColorRecursive(w,m.color,m.colorIndex,P,t.children.length)})}},T.prototype.setPointValues=function(){var t=this,e=t.xAxis,o=t.yAxis,d=t.chart.styledMode;t.points.forEach(function(n){var i=n.node,l=i.pointValues;if(i=i.visible,l&&i){i=l.height;var m=l.width,w=l.x,P=l.y,g=d?0:(t.pointAttribs(n)["stroke-width"]||0)%2/2;l=Math.round(e.toPixels(w,!0))-g,m=Math.round(e.toPixels(w+m,!0))-g,w=Math.round(o.toPixels(P,!0))-g,i=Math.round(o.toPixels(P+i,!0))-g,i={x:Math.min(l,m),y:Math.min(w,i),width:Math.abs(m-l),height:Math.abs(i-w)},n.plotX=i.x+i.width/2,n.plotY=i.y+i.height/2,n.shapeArgs=i}else delete n.plotX,delete n.plotY})},T.prototype.setRootNode=function(t,e,o){t=_({newRootId:t,previousRootId:this.rootNode,redraw:G(e,!0),series:this},o),F(this,"setRootNode",t,function(d){var n=d.series;n.idPreviousRoot=d.previousRootId,n.rootNode=d.newRootId,n.isDirty=!0,d.redraw&&n.chart.redraw()})},T.prototype.setState=function(t){this.options.inactiveOtherPoints=!0,r.prototype.setState.call(this,t,!1),this.options.inactiveOtherPoints=!1},T.prototype.setTreeValues=function(t){var e=this,o=e.options,d=e.nodeMap[e.rootNode];o=C.isBoolean(o.levelIsConstant)?o.levelIsConstant:!0;var n=0,i=[],l=e.points[t.i];t.children.forEach(function(w){w=e.setTreeValues(w),i.push(w),w.ignore||(n+=w.val)}),ot(i,function(w,P){return(w.sortIndex||0)-(P.sortIndex||0)});var m=G(l&&l.options.value,n);return l&&(l.value=m),_(t,{children:i,childrenTotal:n,ignore:!(G(l&&l.visible,!0)&&0<m),isLeaf:t.visible&&!n,levelDynamic:t.level-(o?0:d.level),name:G(l&&l.name,""),sortIndex:G(l&&l.sortIndex,-m),val:m}),t},T.prototype.sliceAndDice=function(t,e){return this.algorithmFill(!0,t,e)},T.prototype.squarified=function(t,e){return this.algorithmLowAspectRatio(!0,t,e)},T.prototype.strip=function(t,e){return this.algorithmLowAspectRatio(!1,t,e)},T.prototype.stripes=function(t,e){return this.algorithmFill(!1,t,e)},T.prototype.translate=function(){var t=this,e=t.options,o=R(t);r.prototype.translate.call(t);var d=t.tree=t.getTree(),n=t.nodeMap[o];o===""||n&&n.children.length||(t.setRootNode("",!1),o=t.rootNode,n=t.nodeMap[o]),t.mapOptionsToLevel=M({from:n.level+1,levels:e.levels,to:d.height,defaults:{levelIsConstant:t.options.levelIsConstant,colorByPoint:e.colorByPoint}}),C.recursive(t.nodeMap[t.rootNode],function(i){var l=!1,m=i.parent;return i.visible=!0,(m||m==="")&&(l=t.nodeMap[m]),l}),C.recursive(t.nodeMap[t.rootNode].children,function(i){var l=!1;return i.forEach(function(m){m.visible=!0,m.children.length&&(l=(l||[]).concat(m.children))}),l}),t.setTreeValues(d),t.axisRatio=t.xAxis.len/t.yAxis.len,t.nodeMap[""].pointValues=o={x:0,y:0,width:C.AXIS_MAX,height:C.AXIS_MAX},t.nodeMap[""].values=o=z(o,{width:o.width*t.axisRatio,direction:e.layoutStartingDirection==="vertical"?0:1,val:d.val}),t.calculateChildrenAreas(d,o),t.colorAxis||e.colorByPoint||t.setColorRecursive(t.tree),e.allowTraversingTree&&(e=n.pointValues,t.xAxis.setExtremes(e.x,e.x+e.width,!1),t.yAxis.setExtremes(e.y,e.y+e.height,!1),t.xAxis.setScale(),t.yAxis.setScale()),t.setPointValues()},T.defaultOptions=z(y.defaultOptions,{allowTraversingTree:!1,animationLimit:250,borderRadius:0,showInLegend:!1,marker:void 0,colorByPoint:!1,dataLabels:{defer:!1,enabled:!0,formatter:function(){var t=this&&this.point?this.point:{};return J(t.name)?t.name:""},inside:!0,verticalAlign:"middle"},tooltip:{headerFormat:"",pointFormat:"<b>{point.name}</b>: {point.value}<br/>"},ignoreHiddenPoint:!0,layoutAlgorithm:"sliceAndDice",layoutStartingDirection:"vertical",alternateStartingDirection:!1,levelIsConstant:!0,traverseUpButton:{position:{align:"right",x:-10,y:10}},borderColor:"#e6e6e6",borderWidth:1,colorKey:"colorValue",opacity:.15,states:{hover:{borderColor:"#999999",brightness:u?0:.1,halo:!1,opacity:.75,shadow:!1}}}),T}(y),_(B.prototype,{buildKDTree:b,colorAttribs:c.seriesMembers.colorAttribs,colorKey:"colorValue",directTouch:!0,drawLegendSymbol:L.drawRectangle,getExtremesFromAll:!0,getSymbol:b,optionalAxis:"colorAxis",parallelArrays:["x","y","value","colorValue"],pointArrayMap:["value"],pointClass:A,NodeClass:x,trackerGroups:["group","dataLabelsGroup"],utils:{recursive:C.recursive}}),c.compose(B),O.registerSeriesType("treemap",B),B}),U(v,"masters/modules/treemap.src.js",[v["Core/Globals.js"],v["Extensions/Breadcrumbs.js"]],function(b,c){b.Breadcrumbs=c})})})(st);const nt=$,lt=rt({__proto__:null,default:nt},[$]);export{lt as t};
