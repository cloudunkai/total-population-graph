function it(q,f){for(var X=0;X<f.length;X++){const O=f[X];if(typeof O!="string"&&!Array.isArray(O)){for(const j in O)if(j!=="default"&&!(j in q)){const D=Object.getOwnPropertyDescriptor(O,j);D&&Object.defineProperty(q,j,D.get?D:{enumerable:!0,get:()=>O[j]})}}}return Object.freeze(Object.defineProperty(q,Symbol.toStringTag,{value:"Module"}))}var Z={},ot={get exports(){return Z},set exports(q){Z=q}};(function(q){(function(f){q.exports?(f.default=f,q.exports=f):f(typeof Highcharts<"u"?Highcharts:void 0)})(function(f){function X(O,j,D,w){O.hasOwnProperty(j)||(O[j]=w.apply(null,D),typeof CustomEvent=="function"&&window.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:j,module:O[j]}})))}f=f?f._modules:{},X(f,"Extensions/Annotations/AnnotationChart.js",[f["Core/Utilities.js"]],function(O){function j(i,l){return i=this.initAnnotation(i),this.options.annotations.push(i.options),a(l,!0)&&(i.redraw(),i.graphic.attr({opacity:1})),i}function D(){var i=this;i.plotBoxClip=this.renderer.clipRect(this.plotBox),i.controlPointsGroup=i.renderer.g("control-points").attr({zIndex:99}).clip(i.plotBoxClip).add(),i.options.annotations.forEach(function(l,d){if(!i.annotations.some(function(b){return b.options===l})){var y=i.initAnnotation(l);i.options.annotations[d]=y.options}}),i.drawAnnotations(),e(i,"redraw",i.drawAnnotations),e(i,"destroy",function(){i.plotBoxClip.destroy(),i.controlPointsGroup.destroy()}),e(i,"exportData",function(l){var d=(this.options.exporting&&this.options.exporting.csv||{}).columnHeaderFormatter,y=!l.dataRows[1].xValues,b=i.options.lang&&i.options.lang.exportData&&i.options.lang.exportData.annotationHeader,A=function(v){if(d){var h=d(v);if(h!==!1)return h}return h=b+" "+v,y?{columnTitle:h,topLevelColumnTitle:h}:h},M=l.dataRows[0].length,P=i.options.exporting&&i.options.exporting.csv&&i.options.exporting.csv.annotations&&i.options.exporting.csv.annotations.itemDelimiter,I=i.options.exporting&&i.options.exporting.csv&&i.options.exporting.csv.annotations&&i.options.exporting.csv.annotations.join;i.annotations.forEach(function(v){v.options.labelOptions&&v.options.labelOptions.includeInDataExport&&v.labels.forEach(function(h){if(h.options.text){var u=h.options.text;h.points.forEach(function(g){var k=g.x,x=g.series.xAxis?g.series.xAxis.options.index:-1,C=!1;if(x===-1){g=l.dataRows[0].length;for(var E=Array(g),_=0;_<g;++_)E[_]="";E.push(u),E.xValues=[],E.xValues[x]=k,l.dataRows.push(E),C=!0}if(C||l.dataRows.forEach(function(L){!C&&L.xValues&&x!==void 0&&k===L.xValues[x]&&(I&&L.length>M?L[L.length-1]+=P+u:L.push(u),C=!0)}),!C){for(g=l.dataRows[0].length,E=Array(g),_=0;_<g;++_)E[_]="";E[0]=k,E.push(u),E.xValues=[],x!==void 0&&(E.xValues[x]=k),l.dataRows.push(E)}})}})});var Y=0;l.dataRows.forEach(function(v){Y=Math.max(Y,v.length)});for(var W=Y-l.dataRows[0].length,T=0;T<W;T++){var B=A(T+1);y?(l.dataRows[0].push(B.topLevelColumnTitle),l.dataRows[1].push(B.columnTitle)):l.dataRows[0].push(B)}})}function w(){this.plotBoxClip.attr(this.plotBox),this.annotations.forEach(function(i){i.redraw(),i.graphic.animate({opacity:1},i.animationConfig)})}function N(i){var l=this.annotations,d=i.coll==="annotations"?i:o(l,function(y){return y.options.id===i});d&&(n(d,"remove"),s(this.options.annotations,d.options),s(l,d),d.destroy())}function r(){this.annotations=[],this.options.annotations||(this.options.annotations=[])}function t(i){this.chart.hasDraggedAnnotation||i.apply(this,Array.prototype.slice.call(arguments,1))}var e=O.addEvent,s=O.erase,o=O.find,n=O.fireEvent,a=O.pick,c=O.wrap,m=[],p;return function(i){i.compose=function(l,d,y){m.indexOf(d)===-1&&(m.push(d),e(d,"afterInit",r),d=d.prototype,d.addAnnotation=j,d.callbacks.push(D),d.collectionsWithInit.annotations=[j],d.collectionsWithUpdate.push("annotations"),d.drawAnnotations=w,d.removeAnnotation=N,d.initAnnotation=function(b){return b=new(l.types[b.type]||l)(this,b),this.annotations.push(b),b}),m.indexOf(y)===-1&&(m.push(y),c(y.prototype,"onContainerMouseDown",t))}}(p||(p={})),p}),X(f,"Extensions/Annotations/AnnotationDefaults.js",[f["Core/Utilities.js"]],function(O){var j=O.defined;return{visible:!0,animation:{},crop:!0,draggable:"xy",labelOptions:{align:"center",allowOverlap:!1,backgroundColor:"rgba(0, 0, 0, 0.75)",borderColor:"#000000",borderRadius:3,borderWidth:1,className:"highcharts-no-tooltip",crop:!1,formatter:function(){return j(this.y)?""+this.y:"Annotation label"},includeInDataExport:!0,overflow:"justify",padding:5,shadow:!1,shape:"callout",style:{fontSize:"11px",fontWeight:"normal",color:"contrast"},useHTML:!1,verticalAlign:"bottom",x:0,y:-16},shapeOptions:{stroke:"rgba(0, 0, 0, 0.75)",strokeWidth:1,fill:"rgba(0, 0, 0, 0.75)",r:0,snap:2},controlPointOptions:{events:{},style:{cursor:"pointer",fill:"#ffffff",stroke:"#000000","stroke-width":2},height:10,symbol:"circle",visible:!1,width:10},events:{},zIndex:6}}),X(f,"Extensions/Annotations/EventEmitter.js",[f["Core/Globals.js"],f["Core/Utilities.js"]],function(O,j){var D=O.doc,w=O.isTouchDevice,N=j.addEvent,r=j.fireEvent,t=j.objectEach,e=j.pick,s=j.removeEvent;return function(){function o(){}return o.prototype.addEvents=function(){var n=this,a=function(m){N(m,w?"touchstart":"mousedown",function(p){n.onMouseDown(p)},{passive:!1})};if(a(this.graphic.element),(n.labels||[]).forEach(function(m){m.options.useHTML&&m.graphic.text&&a(m.graphic.text.element)}),t(n.options.events,function(m,p){var i=function(l){p==="click"&&n.cancelClick||m.call(n,n.chart.pointer.normalize(l),n.target)};(n.nonDOMEvents||[]).indexOf(p)===-1?n.graphic.on(p,i):N(n,p,i,{passive:!1})}),n.options.draggable&&(N(n,"drag",n.onDrag),!n.graphic.renderer.styledMode)){var c={cursor:{x:"ew-resize",y:"ns-resize",xy:"move"}[n.options.draggable]};n.graphic.css(c),(n.labels||[]).forEach(function(m){m.options.useHTML&&m.graphic.text&&m.graphic.text.css(c)})}n.isUpdating||r(n,"add")},o.prototype.destroy=function(){this.removeDocEvents(),s(this),this.hcEvents=null},o.prototype.mouseMoveToRadians=function(n,a,c){var m=n.prevChartY-c,p=n.prevChartX-a;return c=n.chartY-c,n=n.chartX-a,this.chart.inverted&&(a=p,p=m,m=a,a=n,n=c,c=a),Math.atan2(c,n)-Math.atan2(m,p)},o.prototype.mouseMoveToScale=function(n,a,c){return a=(n.chartX-a||1)/(n.prevChartX-a||1),n=(n.chartY-c||1)/(n.prevChartY-c||1),this.chart.inverted&&(c=n,n=a,a=c),{x:a,y:n}},o.prototype.mouseMoveToTranslation=function(n){var a=n.chartX-n.prevChartX;if(n=n.chartY-n.prevChartY,this.chart.inverted){var c=n;n=a,a=c}return{x:a,y:n}},o.prototype.onDrag=function(n){if(this.chart.isInsidePlot(n.chartX-this.chart.plotLeft,n.chartY-this.chart.plotTop,{visiblePlotOnly:!0})){var a=this.mouseMoveToTranslation(n);this.options.draggable==="x"&&(a.y=0),this.options.draggable==="y"&&(a.x=0),this.points.length?this.translate(a.x,a.y):(this.shapes.forEach(function(c){return c.translate(a.x,a.y)}),this.labels.forEach(function(c){return c.translate(a.x,a.y)})),this.redraw(!1)}},o.prototype.onMouseDown=function(n){if(n.preventDefault&&n.preventDefault(),n.button!==2){var a=this,c=a.chart.pointer;n=c.normalize(n);var m=n.chartX,p=n.chartY;a.cancelClick=!1,a.chart.hasDraggedAnnotation=!0,a.removeDrag=N(D,w?"touchmove":"mousemove",function(i){a.hasDragged=!0,i=c.normalize(i),i.prevChartX=m,i.prevChartY=p,r(a,"drag",i),m=i.chartX,p=i.chartY},w?{passive:!1}:void 0),a.removeMouseUp=N(D,w?"touchend":"mouseup",function(i){var l=e(a.target&&a.target.annotation,a.target);l&&(l.cancelClick=a.hasDragged),a.cancelClick=a.hasDragged,a.hasDragged=!1,a.chart.hasDraggedAnnotation=!1,r(e(l,a),"afterUpdate"),a.onMouseUp(i)},w?{passive:!1}:void 0)}},o.prototype.onMouseUp=function(n){var a=this.chart;n=this.target||this;var c=a.options.annotations;a=a.annotations.indexOf(n),this.removeDocEvents(),c[a]=n.options},o.prototype.removeDocEvents=function(){this.removeDrag&&(this.removeDrag=this.removeDrag()),this.removeMouseUp&&(this.removeMouseUp=this.removeMouseUp())},o}()}),X(f,"Extensions/Annotations/ControlPoint.js",[f["Extensions/Annotations/EventEmitter.js"],f["Core/Utilities.js"]],function(O,j){var D=this&&this.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,o){s.__proto__=o}||function(s,o){for(var n in o)o.hasOwnProperty(n)&&(s[n]=o[n])},r(t,e)};return function(t,e){function s(){this.constructor=t}r(t,e),t.prototype=e===null?Object.create(e):(s.prototype=e.prototype,new s)}}(),w=j.merge,N=j.pick;return O=function(r){function t(e,s,o,n){var a=r.call(this)||this;return a.graphic=void 0,a.nonDOMEvents=["drag"],a.chart=e,a.target=s,a.options=o,a.index=N(o.index,n),a}return D(t,r),t.prototype.destroy=function(){r.prototype.destroy.call(this),this.graphic&&(this.graphic=this.graphic.destroy()),this.options=this.target=this.chart=null},t.prototype.redraw=function(e){this.graphic[e?"animate":"attr"](this.options.positioner.call(this,this.target))},t.prototype.render=function(){var e=this.chart,s=this.options;this.graphic=e.renderer.symbol(s.symbol,0,0,s.width,s.height).add(e.controlPointsGroup).css(s.style),this.setVisibility(s.visible),this.addEvents()},t.prototype.setVisibility=function(e){this.graphic[e?"show":"hide"](),this.options.visible=e},t.prototype.update=function(e){var s=this.chart,o=this.target,n=this.index;e=w(!0,this.options,e),this.destroy(),this.constructor(s,o,e,n),this.render(s.controlPointsGroup),this.redraw()},t}(O),O}),X(f,"Extensions/Annotations/MockPoint.js",[f["Core/Series/SeriesRegistry.js"],f["Core/Utilities.js"]],function(O,j){var D=O.series.prototype,w=j.defined,N=j.fireEvent;return O=function(){function r(t,e,s){this.plotY=this.plotX=void 0,this.mock=!0,this.series={visible:!0,chart:t,getPlotBox:D.getPlotBox},this.target=e||null,this.options=s,this.applyOptions(this.getOptions())}return r.fromPoint=function(t){return new r(t.series.chart,null,{x:t.x,y:t.y,xAxis:t.series.xAxis,yAxis:t.series.yAxis})},r.pointToPixels=function(t,e){var s=t.series,o=s.chart,n=t.plotX||0,a=t.plotY||0;return o.inverted&&(t.mock?(n=t.plotY,a=t.plotX):(n=o.plotWidth-(t.plotY||0),a=o.plotHeight-(t.plotX||0))),s&&!e&&(t=s.getPlotBox(),n+=t.translateX,a+=t.translateY),{x:n,y:a}},r.pointToOptions=function(t){return{x:t.x,y:t.y,xAxis:t.series.xAxis,yAxis:t.series.yAxis}},r.prototype.applyOptions=function(t){this.command=t.command,this.setAxis(t,"x"),this.setAxis(t,"y"),this.refresh()},r.prototype.getLabelConfig=function(){return{x:this.x,y:this.y,point:this}},r.prototype.getOptions=function(){return this.hasDynamicOptions()?this.options(this.target):this.options},r.prototype.hasDynamicOptions=function(){return typeof this.options=="function"},r.prototype.isInsidePlot=function(){var t=this.plotX,e=this.plotY,s=this.series.xAxis,o=this.series.yAxis,n={x:t,y:e,isInsidePlot:!0,options:{}};return s&&(n.isInsidePlot=w(t)&&0<=t&&t<=s.len),o&&(n.isInsidePlot=n.isInsidePlot&&w(e)&&0<=e&&e<=o.len),N(this.series.chart,"afterIsInsidePlot",n),n.isInsidePlot},r.prototype.refresh=function(){var t=this.series,e=t.xAxis;t=t.yAxis;var s=this.getOptions();e?(this.x=s.x,this.plotX=e.toPixels(s.x,!0)):(this.x=void 0,this.plotX=s.x),t?(this.y=s.y,this.plotY=t.toPixels(s.y,!0)):(this.y=null,this.plotY=s.y),this.isInside=this.isInsidePlot()},r.prototype.refreshOptions=function(){var t=this.series,e=t.xAxis;t=t.yAxis,this.x=this.options.x=e?this.options.x=e.toValue(this.plotX,!0):this.plotX,this.y=this.options.y=t?t.toValue(this.plotY,!0):this.plotY},r.prototype.rotate=function(t,e,s){if(!this.hasDynamicOptions()){var o=Math.cos(s);s=Math.sin(s);var n=this.plotX-t,a=this.plotY-e;this.plotX=n*o-a*s+t,this.plotY=n*s+a*o+e,this.refreshOptions()}},r.prototype.scale=function(t,e,s,o){if(!this.hasDynamicOptions()){var n=this.plotY*o;this.plotX=(1-s)*t+this.plotX*s,this.plotY=(1-o)*e+n,this.refreshOptions()}},r.prototype.setAxis=function(t,e){e+="Axis",t=t[e];var s=this.series.chart;this.series[e]=typeof t=="object"?t:w(t)?s[e][t]||s.get(t):null},r.prototype.toAnchor=function(){var t=[this.plotX,this.plotY,0,0];return this.series.chart.inverted&&(t[0]=this.plotY,t[1]=this.plotX),t},r.prototype.translate=function(t,e,s,o){this.hasDynamicOptions()||(this.plotX+=s,this.plotY+=o,this.refreshOptions())},r}(),O}),X(f,"Extensions/Annotations/Controllables/Controllable.js",[f["Extensions/Annotations/ControlPoint.js"],f["Extensions/Annotations/MockPoint.js"],f["Core/Tooltip.js"],f["Core/Utilities.js"]],function(O,j,D,w){var N=w.isObject,r=w.isString,t=w.merge,e=w.splat;return w=function(){function s(o,n,a,c){this.graphic=void 0,this.annotation=o,this.chart=o.chart,this.collection=c==="label"?"labels":"shapes",this.options=n,this.points=[],this.controlPoints=[],this.index=a,this.itemType=c,this.init(o,n,a)}return s.prototype.addControlPoints=function(){var o=this,n=this.controlPoints,a=this.options.controlPoints||[];a.forEach(function(c,m){c=t(o.options.controlPointOptions,c),c.index||(c.index=m),a[m]=c,n.push(new O(o.chart,o,c))})},s.prototype.anchor=function(o){var n=o.series.getPlotBox(),a=o.series.chart,c=o.mock?o.toAnchor():D.prototype.getAnchor.call({chart:o.series.chart},o);return c={x:c[0]+(this.options.x||0),y:c[1]+(this.options.y||0),height:c[2]||0,width:c[3]||0},{relativePosition:c,absolutePosition:t(c,{x:c.x+(o.mock?n.translateX:a.plotLeft),y:c.y+(o.mock?n.translateY:a.plotTop)})}},s.prototype.attr=function(){this.graphic.attr.apply(this.graphic,arguments)},s.prototype.attrsFromOptions=function(o){var n=this.constructor.attrsMap,a={},c=this.chart.styledMode,m;for(m in o){var p=n[m];typeof n[m]>"u"||c&&["fill","stroke","stroke-width"].indexOf(p)!==-1||(a[p]=o[m])}return a},s.prototype.destroy=function(){this.graphic&&(this.graphic=this.graphic.destroy()),this.tracker&&(this.tracker=this.tracker.destroy()),this.controlPoints.forEach(function(o){return o.destroy()}),this.options=this.controlPoints=this.points=this.chart=null,this.annotation&&(this.annotation=null)},s.prototype.getPointsOptions=function(){var o=this.options;return o.points||o.point&&e(o.point)},s.prototype.init=function(o,n,a){this.annotation=o,this.chart=o.chart,this.options=n,this.points=[],this.controlPoints=[],this.index=a,this.linkPoints(),this.addControlPoints()},s.prototype.linkPoints=function(){var o=this.getPointsOptions(),n=this.points,a=o&&o.length||0,c;for(c=0;c<a;c++){var m=this.point(o[c],n[c]);if(!m){n.length=0;return}m.mock&&m.refresh(),n[c]=m}return n},s.prototype.point=function(o,n){return o&&o.series?o:(n&&n.series!==null||(N(o)?n=new j(this.chart,this,o):r(o)?n=this.chart.get(o)||null:typeof o=="function"&&(n=o.call(n,this),n=n.series?n:new j(this.chart,this,o))),n)},s.prototype.render=function(o){this.controlPoints.forEach(function(n){return n.render()})},s.prototype.redraw=function(o){this.controlPoints.forEach(function(n){return n.redraw(o)})},s.prototype.rotate=function(o,n,a){this.transform("rotate",o,n,a)},s.prototype.scale=function(o,n,a,c){this.transform("scale",o,n,a,c)},s.prototype.setControlPointsVisibility=function(o){this.controlPoints.forEach(function(n){n.setVisibility(o)})},s.prototype.shouldBeDrawn=function(){return!!this.points.length},s.prototype.transform=function(o,n,a,c,m){var p=this;if(this.chart.inverted){var i=n;n=a,a=i}this.points.forEach(function(l,d){return p.transformPoint(o,n,a,c,m,d)},this)},s.prototype.transformPoint=function(o,n,a,c,m,p){var i=this.points[p];i.mock||(i=this.points[p]=j.fromPoint(i)),i[o](n,a,c,m)},s.prototype.translate=function(o,n){this.transform("translate",null,null,o,n)},s.prototype.translatePoint=function(o,n,a){this.transformPoint("translate",null,null,o,n,a)},s.prototype.translateShape=function(o,n,a){var c=this.annotation.chart,m=this.annotation.userOptions,p=c.annotations.indexOf(this.annotation);c=c.options.annotations[p],this.translatePoint(o,n,0),a&&this.translatePoint(o,n,1),c[this.collection][this.index].point=this.options.point,m[this.collection][this.index].point=this.options.point},s.prototype.update=function(o){var n=this.annotation;o=t(!0,this.options,o);var a=this.graphic.parentGroup;this.destroy(),this.constructor(n,o,this.index,this.itemType),this.render(a),this.redraw()},s}(),w}),X(f,"Extensions/Annotations/Controllables/ControllableDefaults.js",[],function(){return{defaultMarkers:{arrow:{tagName:"marker",attributes:{id:"arrow",refY:5,refX:9,markerWidth:10,markerHeight:10},children:[{tagName:"path",attributes:{d:"M 0 0 L 10 5 L 0 10 Z","stroke-width":0}}]},"reverse-arrow":{tagName:"marker",attributes:{id:"reverse-arrow",refY:5,refX:1,markerWidth:10,markerHeight:10},children:[{tagName:"path",attributes:{d:"M 0 5 L 10 0 L 10 10 Z","stroke-width":0}}]}}}}),X(f,"Extensions/Annotations/Controllables/ControllablePath.js",[f["Extensions/Annotations/Controllables/Controllable.js"],f["Extensions/Annotations/Controllables/ControllableDefaults.js"],f["Core/Globals.js"],f["Core/Utilities.js"]],function(O,j,D,w){function N(y){return function(b){this.attr(y,"url(#"+b+")")}}function r(){this.options.defs=c(s,this.options.defs||{})}function t(y,b){var A={attributes:{id:y}},M={stroke:b.color||"none",fill:b.color||"rgba(0, 0, 0, 0.75)"};return A.children=b.children&&b.children.map(function(P){return c(M,P)}),b=c(!0,{attributes:{markerWidth:20,markerHeight:20,refX:0,refY:0,orient:"auto"}},b,A),b=this.definition(b),b.id=y,b}var e=this&&this.__extends||function(){var y=function(b,A){return y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(M,P){M.__proto__=P}||function(M,P){for(var I in P)P.hasOwnProperty(I)&&(M[I]=P[I])},y(b,A)};return function(b,A){function M(){this.constructor=b}y(b,A),b.prototype=A===null?Object.create(A):(M.prototype=A.prototype,new M)}}(),s=j.defaultMarkers,o=w.addEvent,n=w.defined,a=w.extend,c=w.merge,m=w.uniqueKey,p=[],i=N("marker-end"),l=N("marker-start"),d="rgba(192,192,192,"+(D.svg?1e-4:.002)+")";return function(y){function b(A,M,P){return A=y.call(this,A,M,P,"shape")||this,A.type="path",A}return e(b,y),b.compose=function(A,M){p.indexOf(A)===-1&&(p.push(A),o(A,"afterGetContainer",r)),p.indexOf(M)===-1&&(p.push(M),M.prototype.addMarker=t)},b.prototype.toD=function(){var A=this.options.d;if(A)return typeof A=="function"?A.call(this):A;A=this.points;var M=A.length,P=[],I=M,Y=A[0],W=I&&this.anchor(Y).absolutePosition,T=0;if(W)for(P.push(["M",W.x,W.y]);++T<M&&I;)Y=A[T],I=Y.command||"L",W=this.anchor(Y).absolutePosition,I==="M"?P.push([I,W.x,W.y]):I==="L"?P.push([I,W.x,W.y]):I==="Z"&&P.push([I]),I=Y.series.visible;return I&&this.graphic?this.chart.renderer.crispLine(P,this.graphic.strokeWidth()):null},b.prototype.shouldBeDrawn=function(){return y.prototype.shouldBeDrawn.call(this)||!!this.options.d},b.prototype.render=function(A){var M=this.options,P=this.attrsFromOptions(M);this.graphic=this.annotation.chart.renderer.path([["M",0,0]]).attr(P).add(A),M.className&&this.graphic.addClass(M.className),this.tracker=this.annotation.chart.renderer.path([["M",0,0]]).addClass("highcharts-tracker-line").attr({zIndex:2}).add(A),this.annotation.chart.styledMode||this.tracker.attr({"stroke-linejoin":"round",stroke:d,fill:d,"stroke-width":this.graphic.strokeWidth()+2*M.snap}),y.prototype.render.call(this),a(this.graphic,{markerStartSetter:l,markerEndSetter:i}),this.setMarkers(this)},b.prototype.redraw=function(A){if(this.graphic){var M=this.toD(),P=A?"animate":"attr";M?(this.graphic[P]({d:M}),this.tracker[P]({d:M})):(this.graphic.attr({d:"M 0 -9000000000"}),this.tracker.attr({d:"M 0 -9000000000"})),this.graphic.placed=this.tracker.placed=!!M}y.prototype.redraw.call(this,A)},b.prototype.setMarkers=function(A){var M=A.options,P=A.chart,I=P.options.defs,Y=M.fill,W=n(Y)&&Y!=="none"?Y:M.stroke;["markerStart","markerEnd"].forEach(function(T){var B=M[T],v;if(B){for(v in I){var h=I[v];if((B===(h.attributes&&h.attributes.id)||B===h.id)&&h.tagName==="marker"){var u=h;break}}u&&(B=A[T]=P.renderer.addMarker((M.id||m())+"-"+B,c(u,{color:W})),A.attr(T,B.getAttribute("id")))}})},b.attrsMap={dashStyle:"dashstyle",strokeWidth:"stroke-width",stroke:"stroke",fill:"fill",zIndex:"zIndex"},b}(O)}),X(f,"Extensions/Annotations/Controllables/ControllableRect.js",[f["Extensions/Annotations/Controllables/Controllable.js"],f["Extensions/Annotations/Controllables/ControllablePath.js"],f["Core/Utilities.js"]],function(O,j,D){var w=this&&this.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,o){s.__proto__=o}||function(s,o){for(var n in o)o.hasOwnProperty(n)&&(s[n]=o[n])},r(t,e)};return function(t,e){function s(){this.constructor=t}r(t,e),t.prototype=e===null?Object.create(e):(s.prototype=e.prototype,new s)}}(),N=D.merge;return function(r){function t(e,s,o){return e=r.call(this,e,s,o,"shape")||this,e.type="rect",e.translate=r.prototype.translateShape,e}return w(t,r),t.prototype.render=function(e){var s=this.attrsFromOptions(this.options);this.graphic=this.annotation.chart.renderer.rect(0,-9e9,0,0).attr(s).add(e),r.prototype.render.call(this)},t.prototype.redraw=function(e){if(this.graphic){var s=this.anchor(this.points[0]).absolutePosition;s?this.graphic[e?"animate":"attr"]({x:s.x,y:s.y,width:this.options.width,height:this.options.height}):this.attr({x:0,y:-9e9}),this.graphic.placed=!!s}r.prototype.redraw.call(this,e)},t.attrsMap=N(j.attrsMap,{width:"width",height:"height"}),t}(O)}),X(f,"Extensions/Annotations/Controllables/ControllableCircle.js",[f["Extensions/Annotations/Controllables/Controllable.js"],f["Extensions/Annotations/Controllables/ControllablePath.js"],f["Core/Utilities.js"]],function(O,j,D){var w=this&&this.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,o){s.__proto__=o}||function(s,o){for(var n in o)o.hasOwnProperty(n)&&(s[n]=o[n])},r(t,e)};return function(t,e){function s(){this.constructor=t}r(t,e),t.prototype=e===null?Object.create(e):(s.prototype=e.prototype,new s)}}(),N=D.merge;return function(r){function t(e,s,o){return e=r.call(this,e,s,o,"shape")||this,e.type="circle",e.translate=r.prototype.translateShape,e}return w(t,r),t.prototype.redraw=function(e){if(this.graphic){var s=this.anchor(this.points[0]).absolutePosition;s?this.graphic[e?"animate":"attr"]({x:s.x,y:s.y,r:this.options.r}):this.graphic.attr({x:0,y:-9e9}),this.graphic.placed=!!s}r.prototype.redraw.call(this,e)},t.prototype.render=function(e){var s=this.attrsFromOptions(this.options);this.graphic=this.annotation.chart.renderer.circle(0,-9e9,0).attr(s).add(e),r.prototype.render.call(this)},t.prototype.setRadius=function(e){this.options.r=e},t.attrsMap=N(j.attrsMap,{r:"r"}),t}(O)}),X(f,"Extensions/Annotations/Controllables/ControllableEllipse.js",[f["Extensions/Annotations/Controllables/Controllable.js"],f["Extensions/Annotations/Controllables/ControllablePath.js"],f["Core/Utilities.js"]],function(O,j,D){var w=this&&this.__extends||function(){var t=function(e,s){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var a in n)n.hasOwnProperty(a)&&(o[a]=n[a])},t(e,s)};return function(e,s){function o(){this.constructor=e}t(e,s),e.prototype=s===null?Object.create(s):(o.prototype=s.prototype,new o)}}(),N=D.merge,r=D.defined;return function(t){function e(s,o,n){return s=t.call(this,s,o,n,"shape")||this,s.type="ellipse",s}return w(e,t),e.prototype.init=function(s,o,n){r(o.yAxis)&&o.points.forEach(function(a){a.yAxis=o.yAxis}),r(o.xAxis)&&o.points.forEach(function(a){a.xAxis=o.xAxis}),t.prototype.init.call(this,s,o,n)},e.prototype.render=function(s){this.graphic=this.annotation.chart.renderer.createElement("ellipse").attr(this.attrsFromOptions(this.options)).add(s),t.prototype.render.call(this)},e.prototype.translate=function(s,o){t.prototype.translateShape.call(this,s,o,!0)},e.prototype.getDistanceFromLine=function(s,o,n,a){return Math.abs((o.y-s.y)*n-(o.x-s.x)*a+o.x*s.y-o.y*s.x)/Math.sqrt((o.y-s.y)*(o.y-s.y)+(o.x-s.x)*(o.x-s.x))},e.prototype.getAttrs=function(s,o){var n=s.x,a=s.y,c=o.x,m=o.y;o=(n+c)/2,s=(a+m)/2;var p=Math.sqrt((n-c)*(n-c)/4+(a-m)*(a-m)/4);return a=180*Math.atan((m-a)/(c-n))/Math.PI,o<n&&(a+=180),n=this.getRY(),{cx:o,cy:s,rx:p,ry:n,angle:a}},e.prototype.getRY=function(){var s=this.getYAxis();return r(s)?Math.abs(s.toPixels(this.options.ry)-s.toPixels(0)):this.options.ry},e.prototype.getYAxis=function(){return this.chart.yAxis[this.options.yAxis]},e.prototype.getAbsolutePosition=function(s){return this.anchor(s).absolutePosition},e.prototype.redraw=function(s){if(this.graphic){var o=this.getAbsolutePosition(this.points[0]),n=this.getAbsolutePosition(this.points[1]);n=this.getAttrs(o,n),o?this.graphic[s?"animate":"attr"]({cx:n.cx,cy:n.cy,rx:n.rx,ry:n.ry,rotation:n.angle,rotationOriginX:n.cx,rotationOriginY:n.cy}):this.graphic.attr({x:0,y:-9e9}),this.graphic.placed=!!o}t.prototype.redraw.call(this,s)},e.prototype.setYRadius=function(s){var o=this.annotation.userOptions.shapes;this.options.ry=s,o&&o[0]&&(o[0].ry=s,o[0].ry=s)},e.attrsMap=N(j.attrsMap,{ry:"ry"}),e}(O)}),X(f,"Extensions/Annotations/Controllables/ControllableLabel.js",[f["Extensions/Annotations/Controllables/Controllable.js"],f["Core/FormatUtilities.js"],f["Extensions/Annotations/MockPoint.js"],f["Core/Tooltip.js"],f["Core/Utilities.js"]],function(O,j,D,w,N){function r(c,m,p,i,l){var d=l&&l.anchorX;l=l&&l.anchorY;var y=p/2;if(o(d)&&o(l)){var b=[["M",d,l]],A=m-l;0>A&&(A=-i-A),A<p&&(y=d<c+p/2?A:p-A),l>m+i?b.push(["L",c+y,m+i]):l<m?b.push(["L",c+y,m]):d<c?b.push(["L",c,m+i/2]):d>c+p&&b.push(["L",c+p,m+i/2])}return b||[]}var t=this&&this.__extends||function(){var c=function(m,p){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,l){i.__proto__=l}||function(i,l){for(var d in l)l.hasOwnProperty(d)&&(i[d]=l[d])},c(m,p)};return function(m,p){function i(){this.constructor=m}c(m,p),m.prototype=p===null?Object.create(p):(i.prototype=p.prototype,new i)}}(),e=j.format,s=N.extend,o=N.isNumber,n=N.pick,a=[];return function(c){function m(p,i,l){return c.call(this,p,i,l,"label")||this}return t(m,c),m.alignedPosition=function(p,i){var l=p.align,d=p.verticalAlign,y=(i.x||0)+(p.x||0),b=(i.y||0)+(p.y||0),A,M;return l==="right"?A=1:l==="center"&&(A=2),A&&(y+=(i.width-(p.width||0))/A),d==="bottom"?M=1:d==="middle"&&(M=2),M&&(b+=(i.height-(p.height||0))/M),{x:Math.round(y),y:Math.round(b)}},m.compose=function(p){a.indexOf(p)===-1&&(a.push(p),p.prototype.symbols.connector=r)},m.justifiedOptions=function(p,i,l,d){var y=l.align,b=l.verticalAlign,A=i.box?0:i.padding||0,M=i.getBBox();i={align:y,verticalAlign:b,x:l.x,y:l.y,width:i.width,height:i.height},l=(d.x||0)-p.plotLeft,d=(d.y||0)-p.plotTop;var P=l+A;return 0>P&&(y==="right"?i.align="left":i.x=(i.x||0)-P),P=l+M.width-A,P>p.plotWidth&&(y==="left"?i.align="right":i.x=(i.x||0)+p.plotWidth-P),P=d+A,0>P&&(b==="bottom"?i.verticalAlign="top":i.y=(i.y||0)-P),P=d+M.height-A,P>p.plotHeight&&(b==="top"?i.verticalAlign="bottom":i.y=(i.y||0)+p.plotHeight-P),i},m.prototype.translatePoint=function(p,i){c.prototype.translatePoint.call(this,p,i,0)},m.prototype.translate=function(p,i){var l=this.annotation.chart,d=this.annotation.userOptions,y=l.annotations.indexOf(this.annotation);y=l.options.annotations[y],l.inverted&&(l=p,p=i,i=l),this.options.x+=p,this.options.y+=i,y[this.collection][this.index].x=this.options.x,y[this.collection][this.index].y=this.options.y,d[this.collection][this.index].x=this.options.x,d[this.collection][this.index].y=this.options.y},m.prototype.render=function(p){var i=this.options,l=this.attrsFromOptions(i),d=i.style;this.graphic=this.annotation.chart.renderer.label("",0,-9999,i.shape,null,null,i.useHTML,null,"annotation-label").attr(l).add(p),this.annotation.chart.styledMode||(d.color==="contrast"&&(d.color=this.annotation.chart.renderer.getContrast(-1<m.shapesWithoutBackground.indexOf(i.shape)?"#FFFFFF":i.backgroundColor)),this.graphic.css(i.style).shadow(i.shadow)),i.className&&this.graphic.addClass(i.className),this.graphic.labelrank=i.labelrank,c.prototype.render.call(this)},m.prototype.redraw=function(p){var i=this.options,l=this.text||i.format||i.text,d=this.graphic,y=this.points[0];d?(d.attr({text:l?e(String(l),y.getLabelConfig(),this.annotation.chart):i.formatter.call(y,this)}),i=this.anchor(y),(l=this.position(i))?(d.alignAttr=l,l.anchorX=i.absolutePosition.x,l.anchorY=i.absolutePosition.y,d[p?"animate":"attr"](l)):d.attr({x:0,y:-9999}),d.placed=!!l,c.prototype.redraw.call(this,p)):this.redraw(p)},m.prototype.anchor=function(p){var i=c.prototype.anchor.apply(this,arguments),l=this.options.x||0,d=this.options.y||0;return i.absolutePosition.x-=l,i.absolutePosition.y-=d,i.relativePosition.x-=l,i.relativePosition.y-=d,i},m.prototype.position=function(p){var i=this.graphic,l=this.annotation.chart,d=this.points[0],y=this.options,b=p.absolutePosition,A=p.relativePosition,M=d.series.visible&&D.prototype.isInsidePlot.call(d);if(i&&M){var P=i.width;p=P===void 0?0:P,P=i.height;var I=P===void 0?0:P;y.distance?P=w.prototype.getPosition.call({chart:l,distance:n(y.distance,16)},p,I,{plotX:A.x,plotY:A.y,negative:d.negative,ttBelow:d.ttBelow,h:A.height||A.width}):y.positioner?P=y.positioner.call(this):(d={x:b.x,y:b.y,width:0,height:0},P=m.alignedPosition(s(y,{width:p,height:I}),d),this.options.overflow==="justify"&&(P=m.alignedPosition(m.justifiedOptions(l,i,y,P),d))),y.crop&&(i=P.x-l.plotLeft,y=P.y-l.plotTop,M=l.isInsidePlot(i,y)&&l.isInsidePlot(i+p,y+I))}return M?P:null},m.attrsMap={backgroundColor:"fill",borderColor:"stroke",borderWidth:"stroke-width",zIndex:"zIndex",borderRadius:"r",padding:"padding"},m.shapesWithoutBackground=["connector"],m}(O)}),X(f,"Extensions/Annotations/Controllables/ControllableImage.js",[f["Extensions/Annotations/Controllables/Controllable.js"],f["Extensions/Annotations/Controllables/ControllableLabel.js"]],function(O,j){var D=this&&this.__extends||function(){var w=function(N,r){return w=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s])},w(N,r)};return function(N,r){function t(){this.constructor=N}w(N,r),N.prototype=r===null?Object.create(r):(t.prototype=r.prototype,new t)}}();return function(w){function N(r,t,e){return r=w.call(this,r,t,e,"shape")||this,r.type="image",r.translate=w.prototype.translateShape,r}return D(N,w),N.prototype.render=function(r){var t=this.attrsFromOptions(this.options),e=this.options;this.graphic=this.annotation.chart.renderer.image(e.src,0,-9e9,e.width,e.height).attr(t).add(r),this.graphic.width=e.width,this.graphic.height=e.height,w.prototype.render.call(this)},N.prototype.redraw=function(r){if(this.graphic){var t=this.anchor(this.points[0]);(t=j.prototype.position.call(this,t))?this.graphic[r?"animate":"attr"]({x:t.x,y:t.y}):this.graphic.attr({x:0,y:-9e9}),this.graphic.placed=!!t}w.prototype.redraw.call(this,r)},N.attrsMap={width:"width",height:"height",zIndex:"zIndex"},N}(O)}),X(f,"Core/Chart/ChartNavigationComposition.js",[],function(){var O;return function(j){j.compose=function(w){return w.navigation||(w.navigation=new D(w)),w};var D=function(){function w(N){this.updates=[],this.chart=N}return w.prototype.addUpdate=function(N){this.chart.navigation.updates.push(N)},w.prototype.update=function(N,r){var t=this;this.updates.forEach(function(e){e.call(t.chart,N,r)})},w}();j.Additions=D}(O||(O={})),O}),X(f,"Extensions/Annotations/NavigationBindingsUtilities.js",[f["Core/Utilities.js"]],function(O){var j=O.defined,D=O.isNumber,w=O.pick,N={backgroundColor:"string",borderColor:"string",borderRadius:"string",color:"string",fill:"string",fontSize:"string",labels:"string",name:"string",stroke:"string",title:"string"};return{annotationsFieldsTypes:N,getAssignedAxis:function(r){return r.filter(function(t){var e=t.axis.getExtremes(),s=e.min;e=e.max;var o=w(t.axis.minPointOffset,0);return D(s)&&D(e)&&t.value>=s-o&&t.value<=e+o&&!t.axis.options.isInternal})[0]},getFieldType:function(r,t){return r=N[r],t=typeof t,j(r)&&(t=r),{string:"text",number:"number",boolean:"checkbox"}[t]}}}),X(f,"Extensions/Annotations/NavigationBindingsDefaults.js",[f["Extensions/Annotations/NavigationBindingsUtilities.js"],f["Core/Utilities.js"]],function(O,j){var D=O.getAssignedAxis,w=j.isNumber,N=j.merge;return{lang:{navigation:{popup:{simpleShapes:"Simple shapes",lines:"Lines",circle:"Circle",ellipse:"Ellipse",rectangle:"Rectangle",label:"Label",shapeOptions:"Shape options",typeOptions:"Details",fill:"Fill",format:"Text",strokeWidth:"Line width",stroke:"Line color",title:"Title",name:"Name",labelOptions:"Label options",labels:"Labels",backgroundColor:"Background color",backgroundColors:"Background colors",borderColor:"Border color",borderRadius:"Border radius",borderWidth:"Border width",style:"Style",padding:"Padding",fontSize:"Font size",color:"Color",height:"Height",shapes:"Shape options"}}},navigation:{bindingsClassName:"highcharts-bindings-container",bindings:{circleAnnotation:{className:"highcharts-circle-annotation",start:function(r){var t=this.chart.pointer.getCoordinates(r);r=D(t.xAxis),t=D(t.yAxis);var e=this.chart.options.navigation;if(r&&t)return this.chart.addAnnotation(N({langKey:"circle",type:"basicAnnotation",shapes:[{type:"circle",point:{x:r.value,y:t.value,xAxis:r.axis.options.index,yAxis:t.axis.options.index},r:5}]},e.annotationsOptions,e.bindings.circleAnnotation.annotationsOptions))},steps:[function(r,t){var e=t.options.shapes;if(e=e&&e[0]&&e[0].point||{},w(e.xAxis)&&w(e.yAxis)){var s=this.chart.inverted,o=this.chart.xAxis[e.xAxis].toPixels(e.x);e=this.chart.yAxis[e.yAxis].toPixels(e.y),s=Math.max(Math.sqrt(Math.pow(s?e-r.chartX:o-r.chartX,2)+Math.pow(s?o-r.chartY:e-r.chartY,2)),5)}t.update({shapes:[{r:s}]})}]},ellipseAnnotation:{className:"highcharts-ellipse-annotation",start:function(r){var t=this.chart.pointer.getCoordinates(r);r=D(t.xAxis),t=D(t.yAxis);var e=this.chart.options.navigation;if(r&&t)return this.chart.addAnnotation(N({langKey:"ellipse",type:"basicAnnotation",shapes:[{type:"ellipse",xAxis:r.axis.options.index,yAxis:t.axis.options.index,points:[{x:r.value,y:t.value},{x:r.value,y:t.value}],ry:1}]},e.annotationsOptions,e.bindings.ellipseAnnotation.annotationOptions))},steps:[function(r,t){t=t.shapes[0];var e=t.getAbsolutePosition(t.points[1]);t.translatePoint(r.chartX-e.x,r.chartY-e.y,1),t.redraw(!1)},function(r,t){t=t.shapes[0];var e=t.getAbsolutePosition(t.points[0]),s=t.getAbsolutePosition(t.points[1]);r=t.getDistanceFromLine(e,s,r.chartX,r.chartY),e=t.getYAxis(),r=Math.abs(e.toValue(0)-e.toValue(r)),t.setYRadius(r),t.redraw(!1)}]},rectangleAnnotation:{className:"highcharts-rectangle-annotation",start:function(r){r=this.chart.pointer.getCoordinates(r);var t=D(r.xAxis),e=D(r.yAxis);if(t&&e){r=t.value;var s=e.value;t=t.axis.options.index,e=e.axis.options.index;var o=this.chart.options.navigation;return this.chart.addAnnotation(N({langKey:"rectangle",type:"basicAnnotation",shapes:[{type:"path",points:[{xAxis:t,yAxis:e,x:r,y:s},{xAxis:t,yAxis:e,x:r,y:s},{xAxis:t,yAxis:e,x:r,y:s},{xAxis:t,yAxis:e,x:r,y:s},{command:"Z"}]}]},o.annotationsOptions,o.bindings.rectangleAnnotation.annotationsOptions))}},steps:[function(r,t){var e=t.options.shapes;e=e&&e[0]&&e[0].points||[];var s=this.chart.pointer.getCoordinates(r);r=D(s.xAxis),s=D(s.yAxis),r&&s&&(r=r.value,s=s.value,e[1].x=r,e[2].x=r,e[2].y=s,e[3].y=s,t.update({shapes:[{points:e}]}))}]},labelAnnotation:{className:"highcharts-label-annotation",start:function(r){var t=this.chart.pointer.getCoordinates(r);r=D(t.xAxis),t=D(t.yAxis);var e=this.chart.options.navigation;if(r&&t)return this.chart.addAnnotation(N({langKey:"label",type:"basicAnnotation",labelOptions:{format:"{y:.2f}"},labels:[{point:{xAxis:r.axis.options.index,yAxis:t.axis.options.index,x:r.value,y:t.value},overflow:"none",crop:!0}]},e.annotationsOptions,e.bindings.labelAnnotation.annotationsOptions))}}},events:{},annotationsOptions:{animation:{defer:0}}}}}),X(f,"Extensions/Annotations/NavigationBindings.js",[f["Core/Chart/ChartNavigationComposition.js"],f["Core/Defaults.js"],f["Core/FormatUtilities.js"],f["Core/Globals.js"],f["Extensions/Annotations/NavigationBindingsDefaults.js"],f["Extensions/Annotations/NavigationBindingsUtilities.js"],f["Core/Utilities.js"]],function(O,j,D,w,N,r,t){function e(k,x){var C=y.Element.prototype,E=C.matches||C.msMatchesSelector||C.webkitMatchesSelector,_=null;if(C.closest)_=C.closest.call(k,x);else do{if(E.call(k,x))return k;k=k.parentElement||k.parentNode}while(k!==null&&k.nodeType===1);return _}function s(){this.chart.navigationBindings&&this.chart.navigationBindings.deselectAnnotation()}function o(){this.navigationBindings&&this.navigationBindings.destroy()}function n(){var k=this.options;k&&k.navigation&&k.navigation.bindings&&(this.navigationBindings=new g(this,k.navigation),this.navigationBindings.initEvents(),this.navigationBindings.initUpdate())}function a(){var k=this.navigationBindings;if(this&&k){var x=!1;if(this.series.forEach(function(E){!E.options.isInternal&&E.visible&&(x=!0)}),this.navigationBindings&&this.navigationBindings.container&&this.navigationBindings.container[0]){var C=this.navigationBindings.container[0];v(k.boundClassNames,function(E,_){if(_=C.querySelectorAll("."+_))for(var L=0;L<_.length;L++){var S=_[L],R=S.className;E.noDataState==="normal"||x?R.indexOf("highcharts-disabled-btn")!==-1&&S.classList.remove("highcharts-disabled-btn"):R.indexOf("highcharts-disabled-btn")===-1&&(S.className+=" highcharts-disabled-btn")}})}}}function c(){this.deselectAnnotation()}function m(){this.selectedButtonElement=null}function p(k){var x=k.prototype.defaultOptions.events&&k.prototype.defaultOptions.events.click;B(!0,k.prototype.defaultOptions.events,{click:function(C){var E=this,_=E.chart.navigationBindings,L=_.activeAnnotation;x&&x.call(E,C),L!==E?(_.deselectAnnotation(),_.activeAnnotation=E,E.setControlPointsVisibility(!0),P(_,"showPopup",{annotation:E,formType:"annotation-toolbar",options:_.annotationToFields(E),onSubmit:function(S){if(S.actionType==="remove")_.activeAnnotation=!1,_.chart.removeAnnotation(E);else{var R={};_.fieldsToOptions(S.fields,R),_.deselectAnnotation(),S=R.typeOptions,E.options.type==="measure"&&(S.crosshairY.enabled=S.crosshairY.strokeWidth!==0,S.crosshairX.enabled=S.crosshairX.strokeWidth!==0),E.update(R)}}})):P(_,"closePopup"),C.activeAnnotation=!0}})}var i=j.setOptions,l=D.format,d=w.doc,y=w.win,b=r.getFieldType,A=t.addEvent,M=t.attr,P=t.fireEvent,I=t.isArray,Y=t.isFunction,W=t.isNumber,T=t.isObject,B=t.merge,v=t.objectEach,h=t.pick,u=[],g=function(){function k(x,C){this.selectedButton=this.boundClassNames=void 0,this.chart=x,this.options=C,this.eventsToUnbind=[],this.container=this.chart.container.getElementsByClassName(this.options.bindingsClassName||""),this.container.length||(this.container=d.getElementsByClassName(this.options.bindingsClassName||""))}return k.compose=function(x,C){u.indexOf(x)===-1&&(u.push(x),A(x,"remove",s),p(x),v(x.types,function(E){p(E)})),u.indexOf(C)===-1&&(u.push(C),A(C,"destroy",o),A(C,"load",n),A(C,"render",a)),u.indexOf(k)===-1&&(u.push(k),A(k,"closePopup",c),A(k,"deselectButton",m)),u.indexOf(i)===-1&&(u.push(i),i(N))},k.prototype.initEvents=function(){var x=this,C=x.chart,E=x.container,_=x.options;x.boundClassNames={},v(_.bindings||{},function(L){x.boundClassNames[L.className]=L}),[].forEach.call(E,function(L){x.eventsToUnbind.push(A(L,"click",function(S){var R=x.getButtonEvents(L,S);R&&R.button.className.indexOf("highcharts-disabled-btn")===-1&&x.bindingsButtonClick(R.button,R.events,S)}))}),v(_.events||{},function(L,S){Y(L)&&x.eventsToUnbind.push(A(x,S,L,{passive:!1}))}),x.eventsToUnbind.push(A(C.container,"click",function(L){!C.cancelClick&&C.isInsidePlot(L.chartX-C.plotLeft,L.chartY-C.plotTop,{visiblePlotOnly:!0})&&x.bindingsChartClick(this,L)})),x.eventsToUnbind.push(A(C.container,w.isTouchDevice?"touchmove":"mousemove",function(L){x.bindingsContainerMouseMove(this,L)},w.isTouchDevice?{passive:!1}:void 0))},k.prototype.initUpdate=function(){var x=this;O.compose(this.chart).navigation.addUpdate(function(C){x.update(C)})},k.prototype.bindingsButtonClick=function(x,C,E){var _=this.chart,L=_.renderer.boxWrapper,S=!0;this.selectedButtonElement&&(this.selectedButtonElement.classList===x.classList&&(S=!1),P(this,"deselectButton",{button:this.selectedButtonElement}),this.nextEvent&&(this.currentUserDetails&&this.currentUserDetails.coll==="annotations"&&_.removeAnnotation(this.currentUserDetails),this.mouseMoveEvent=this.nextEvent=!1)),S?(this.selectedButton=C,this.selectedButtonElement=x,P(this,"selectButton",{button:x}),C.init&&C.init.call(this,x,E),(C.start||C.steps)&&_.renderer.boxWrapper.addClass("highcharts-draw-mode")):(_.stockTools&&_.stockTools.toggleButtonActiveClass(x),L.removeClass("highcharts-draw-mode"),this.mouseMoveEvent=this.nextEvent=!1,this.selectedButton=null)},k.prototype.bindingsChartClick=function(x,C){x=this.chart;var E=this.activeAnnotation,_=this.selectedButton;x=x.renderer.boxWrapper,E&&(E.cancelClick||C.activeAnnotation||!C.target.parentNode||e(C.target,".highcharts-popup")?E.cancelClick&&setTimeout(function(){E.cancelClick=!1},0):P(this,"closePopup")),_&&_.start&&(this.nextEvent?(this.nextEvent(C,this.currentUserDetails),this.steps&&(this.stepIndex++,_.steps[this.stepIndex]?this.mouseMoveEvent=this.nextEvent=_.steps[this.stepIndex]:(P(this,"deselectButton",{button:this.selectedButtonElement}),x.removeClass("highcharts-draw-mode"),_.end&&_.end.call(this,C,this.currentUserDetails),this.mouseMoveEvent=this.nextEvent=!1,this.selectedButton=null))):(this.currentUserDetails=_.start.call(this,C))&&_.steps?(this.stepIndex=0,this.steps=!0,this.mouseMoveEvent=this.nextEvent=_.steps[this.stepIndex]):(P(this,"deselectButton",{button:this.selectedButtonElement}),x.removeClass("highcharts-draw-mode"),this.steps=!1,this.selectedButton=null,_.end&&_.end.call(this,C,this.currentUserDetails)))},k.prototype.bindingsContainerMouseMove=function(x,C){this.mouseMoveEvent&&this.mouseMoveEvent(C,this.currentUserDetails)},k.prototype.fieldsToOptions=function(x,C){return v(x,function(E,_){var L=parseFloat(E),S=_.split("."),R=S.length-1;if(!W(L)||E.match(/px/g)||_.match(/format/g)||(E=L),E!=="undefined"){var H=C;S.forEach(function(F,U){var G=h(S[U+1],"");R===U?H[F]=E:(H[F]||(H[F]=G.match(/\d/g)?[]:{}),H=H[F])})}}),C},k.prototype.deselectAnnotation=function(){this.activeAnnotation&&(this.activeAnnotation.setControlPointsVisibility(!1),this.activeAnnotation=!1)},k.prototype.annotationToFields=function(x){function C(F,U,G,z,J){if(G&&F&&R.indexOf(U)===-1&&(0<=(G.indexOf&&G.indexOf(U))||G[U]||G===!0))if(I(F))z[U]=[],F.forEach(function(K,$){T(K)?(z[U][$]={},v(K,function(Q,tt){C(Q,tt,L[U],z[U][$],U)})):C(K,0,L[U],z[U],U)});else if(T(F)){var V={};I(z)?(z.push(V),V[U]={},V=V[U]):z[U]=V,v(F,function(K,$){C(K,$,U===0?G:L[U],V,U)})}else U==="format"?z[U]=[l(F,x.labels[0].points[0]).toString(),"text"]:I(z)?z.push([F,b(J,F)]):z[U]=[F,b(U,F)]}var E=x.options,_=k.annotationsEditable,L=_.nestedOptions,S=h(E.type,E.shapes&&E.shapes[0]&&E.shapes[0].type,E.labels&&E.labels[0]&&E.labels[0].type,"label"),R=k.annotationsNonEditable[E.langKey]||[],H={langKey:E.langKey,type:S};return v(E,function(F,U){U==="typeOptions"?(H[U]={},v(E[U],function(G,z){C(G,z,L,H[U],z)})):C(F,U,_[S],H,U)}),H},k.prototype.getClickedClassNames=function(x,C){var E=C.target;C=[];for(var _;E&&((_=M(E,"class"))&&(C=C.concat(_.split(" ").map(function(L){return[L,E]}))),E=E.parentNode,E!==x););return C},k.prototype.getButtonEvents=function(x,C){var E=this,_;return this.getClickedClassNames(x,C).forEach(function(L){E.boundClassNames[L[0]]&&!_&&(_={events:E.boundClassNames[L[0]],button:L[1]})}),_},k.prototype.update=function(x){this.options=B(!0,this.options,x),this.removeEvents(),this.initEvents()},k.prototype.removeEvents=function(){this.eventsToUnbind.forEach(function(x){return x()})},k.prototype.destroy=function(){this.removeEvents()},k.annotationsEditable={nestedOptions:{labelOptions:["style","format","backgroundColor"],labels:["style"],label:["style"],style:["fontSize","color"],background:["fill","strokeWidth","stroke"],innerBackground:["fill","strokeWidth","stroke"],outerBackground:["fill","strokeWidth","stroke"],shapeOptions:["fill","strokeWidth","stroke"],shapes:["fill","strokeWidth","stroke"],line:["strokeWidth","stroke"],backgroundColors:[!0],connector:["fill","strokeWidth","stroke"],crosshairX:["strokeWidth","stroke"],crosshairY:["strokeWidth","stroke"]},circle:["shapes"],ellipse:["shapes"],verticalLine:[],label:["labelOptions"],measure:["background","crosshairY","crosshairX"],fibonacci:[],tunnel:["background","line","height"],pitchfork:["innerBackground","outerBackground"],rect:["shapes"],crookedLine:[],basicAnnotation:["shapes","labelOptions"]},k.annotationsNonEditable={rectangle:["crosshairX","crosshairY","labelOptions"],ellipse:["labelOptions"],circle:["labelOptions"]},k}();return g}),X(f,"Extensions/Annotations/Popup/PopupAnnotations.js",[f["Core/Globals.js"],f["Core/Utilities.js"]],function(O,j){function D(a,c,m,p,i,l){var d=this;if(c){var y=this.addInput,b=this.lang,A,M;s(p,function(P,I){A=m!==""?m+"."+I:I,e(P)&&(!t(P)||t(P)&&e(P[0])?(M=b[I]||I,M.match(/\d/g)||i.push([!0,M,a]),D.call(d,a,c,A,P,i,!1)):i.push([d,A,"annotation",a,P]))}),l&&(n(i,function(P){return P[1].match(/format/g)?-1:1}),N&&i.reverse(),i.forEach(function(P){P[0]===!0?r("span",{className:"highcharts-annotation-title"},void 0,P[2]).appendChild(w.createTextNode(P[1])):(P[4]={value:P[4][0],type:P[4][1]},y.apply(P[0],P.splice(1)))}))}}var w=O.doc,N=O.isFirefox,r=j.createElement,t=j.isArray,e=j.isObject,s=j.objectEach,o=j.pick,n=j.stableSort;return{addForm:function(a,c,m,p){if(a){var i=this.container,l=this.lang,d=r("h2",{className:"highcharts-popup-main-title"},void 0,i);d.appendChild(w.createTextNode(l[c.langKey]||c.langKey||"")),d=r("div",{className:"highcharts-popup-lhs-col highcharts-popup-lhs-full"},void 0,i);var y=r("div",{className:"highcharts-popup-bottom-row"},void 0,i);D.call(this,d,a,"",c,[],!0),this.addButton(y,p?l.addButton||"Add":l.saveButton||"Save",p?"add":"save",i,m)}},addToolbar:function(a,c,m){var p=this,i=this.lang,l=this.container,d=this.showForm;l.className.indexOf("highcharts-annotation-toolbar")===-1&&(l.className+=" highcharts-annotation-toolbar"),a&&(l.style.top=a.plotTop+10+"px"),r("span",void 0,void 0,l).appendChild(w.createTextNode(o(i[c.langKey]||c.langKey,c.shapes&&c.shapes[0].type,"")));var y=this.addButton(l,i.removeButton||"Remove","remove",l,m);y.className+=" highcharts-annotation-remove-button",y.style["background-image"]="url("+this.iconsURL+"destroy.svg)",y=this.addButton(l,i.editButton||"Edit","edit",l,function(){d.call(p,"annotation-edit",a,c,m)}),y.className+=" highcharts-annotation-edit-button",y.style["background-image"]="url("+this.iconsURL+"edit.svg)"}}}),X(f,"Extensions/Annotations/Popup/PopupIndicators.js",[f["Core/Renderer/HTML/AST.js"],f["Core/Globals.js"],f["Extensions/Annotations/NavigationBindingsUtilities.js"],f["Core/Series/SeriesRegistry.js"],f["Core/Utilities.js"]],function(O,j,D,w,N){function r(T){var B=y("div",{className:"highcharts-popup-lhs-col"},void 0,T);return T=y("div",{className:"highcharts-popup-rhs-col"},void 0,T),y("div",{className:"highcharts-popup-rhs-col-wrapper"},void 0,T),{lhsCol:B,rhsCol:T}}function t(T,B,v,h){var u=this,g=u.lang,k=B.querySelectorAll(".highcharts-popup-lhs-col")[0];B=B.querySelectorAll(".highcharts-popup-rhs-col")[0];var x=v==="edit";if(v=x?T.series:T.options.plotOptions||{},T||!v){var C,E=[];x||A(v)?A(v)&&(E=c.call(this,v)):E=a.call(this,v,h),I(E,function(S,R){return S=S.indicatorFullName.toLowerCase(),R=R.indicatorFullName.toLowerCase(),S<R?-1:S>R?1:0}),k.children[1]&&k.children[1].remove();var _=y("ul",{className:"highcharts-indicator-list"},void 0,k),L=B.querySelectorAll(".highcharts-popup-rhs-col-wrapper")[0];E.forEach(function(S){var R=S.indicatorFullName,H=S.indicatorType,F=S.series;C=y("li",{className:"highcharts-indicator-list"},void 0,_),C.appendChild(i.createTextNode(R)),["click","touchstart"].forEach(function(U){d(C,U,function(){var G=L.parentNode.children[1],z=F.params||F.options.params;L.innerHTML=O.emptyHTML,y("h3",{className:"highcharts-indicator-title"},void 0,L).appendChild(i.createTextNode(m(F,H).indicatorFullName)),y("input",{type:"hidden",name:"highcharts-type-"+H,value:H},void 0,L),p.call(u,H,"series",T,L,F,F.linkedParent&&F.linkedParent.options.id),z.volumeSeriesID&&p.call(u,H,"volume",T,L,F,F.linkedParent&&z.volumeSeriesID),e.call(u,T,"params",z,H,L),G&&(G.style.display="block"),x&&F.options&&y("input",{type:"hidden",name:"highcharts-id-"+H,value:F.options.id},void 0,L).setAttribute("highcharts-data-series-id",F.options.id)})})}),0<_.childNodes.length?_.childNodes[0].click():x||(O.setElementHTML(L.parentNode.children[0],g.noFilterMatch||""),L.parentNode.children[1].style.display="none")}}function e(T,B,v,h,u){var g=this;if(T){var k=this.addInput;P(v,function(x,C){var E=B+"."+C;b(x)&&E&&(M(x)&&(k.call(g,E,h,u,{}),e.call(g,T,E,x,h,u)),E in Y?(E=o.call(g,h,E,u),n.call(g,T,B,E,h,C,x)):E==="params.volumeSeriesID"||A(x)||k.call(g,E,h,u,{value:x,type:"number"}))})}}function s(T,B){var v=this,h=B.querySelectorAll(".highcharts-popup-lhs-col")[0];B=this.lang.clearFilter,h=y("div",{className:"highcharts-input-wrapper"},void 0,h);var u=this.addInput("searchIndicators","input",h,{value:"",type:"text",htmlFor:"search-indicators",labelClassName:"highcharts-input-search-indicators-label"}),g=y("a",{textContent:B},void 0,h);u.classList.add("highcharts-input-search-indicators"),g.classList.add("clear-filter-button"),d(u,"input",function(k){t.call(v,T,v.container,"add",this.value),g.style.display=this.value.length?"inline-block":"none"}),["click","touchstart"].forEach(function(k){d(g,k,function(){u.value="",t.call(v,T,v.container,"add",""),g.style.display="none"})})}function o(T,B,v){var h=B.split(".");h=h[h.length-1],T="highcharts-"+B+"-type-"+T;var u=this.lang;return y("label",{htmlFor:T},null,v).appendChild(i.createTextNode(u[h]||B)),v=y("select",{name:T,className:"highcharts-popup-field",id:"highcharts-select-"+B},null,v),v.setAttribute("id","highcharts-select-"+B),v}function n(T,B,v,h,u,g,k){B==="series"||B==="volume"?T.series.forEach(function(x){var C=x.options,E=C.name||C.params?x.name:C.id||"";C.id!=="highcharts-navigator-series"&&C.id!==(k&&k.options&&k.options.id)&&(b(g)||B!=="volume"||x.type!=="column"||(g=C.id),y("option",{value:C.id},void 0,v).appendChild(i.createTextNode(E)))}):h&&u&&W[u+"-"+h].forEach(function(x){y("option",{value:x},void 0,v).appendChild(i.createTextNode(x))}),b(g)&&(v.value=g)}function a(T,B){var v=this.chart&&this.chart.options.lang,h=v&&v.navigation&&v.navigation.popup&&v.navigation.popup.indicatorAliases,u=[],g;return P(T,function(k,x){var C=k&&k.options;if(k.params||C&&C.params)if(C=m(k,x),x=C.indicatorFullName,C=C.indicatorType,B){var E=B.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");E=new RegExp(E,"i");var _=h&&h[C]&&h[C].join(" ")||"";(x.match(E)||_.match(E))&&(g={indicatorFullName:x,indicatorType:C,series:k},u.push(g))}else g={indicatorFullName:x,indicatorType:C,series:k},u.push(g)}),u}function c(T){var B=[];return T.forEach(function(v){v.is("sma")&&B.push({indicatorFullName:v.name,indicatorType:v.type,series:v})}),B}function m(T,B){var v=T.options,h=l[B]&&l[B].prototype.nameBase||B.toUpperCase();return v&&v.type&&(B=T.options.type,h=T.name),{indicatorFullName:h,indicatorType:B}}function p(T,B,v,h,u,g){v&&(T=o.call(this,T,B,h),n.call(this,v,B,T,void 0,void 0,void 0,u),b(g)&&(T.value=g))}var i=j.doc,l=w.seriesTypes,d=N.addEvent,y=N.createElement,b=N.defined,A=N.isArray,M=N.isObject,P=N.objectEach,I=N.stableSort,Y;(function(T){T[T["params.algorithm"]=0]="params.algorithm",T[T["params.average"]=1]="params.average"})(Y||(Y={}));var W={"algorithm-pivotpoints":["standard","fibonacci","camarilla"],"average-disparityindex":["sma","ema","dema","tema","wma"]};return{addForm:function(T,B,v){if(B=this.lang,T){this.tabs.init.call(this,T);var h=this.container.querySelectorAll(".highcharts-tab-item-content");r(h[0]),s.call(this,T,h[0]),t.call(this,T,h[0],"add");var u=h[0].querySelectorAll(".highcharts-popup-rhs-col")[0];this.addButton(u,B.addButton||"add","add",u,v),r(h[1]),t.call(this,T,h[1],"edit"),u=h[1].querySelectorAll(".highcharts-popup-rhs-col")[0],this.addButton(u,B.saveButton||"save","edit",u,v),this.addButton(u,B.removeButton||"remove","remove",u,v)}},getAmount:function(){var T=0;return this.series.forEach(function(B){(B.params||B.options.params)&&T++}),T}}}),X(f,"Extensions/Annotations/Popup/PopupTabs.js",[f["Core/Globals.js"],f["Core/Utilities.js"]],function(O,j){function D(){return s("div",{className:"highcharts-tab-item-content highcharts-no-mousewheel"},void 0,this.container)}function w(o,n){var a=this.container,c=this.lang,m="highcharts-tab-item";return n===0&&(m+=" highcharts-tab-disabled"),n=s("span",{className:m},void 0,a),n.appendChild(t.createTextNode(c[o+"Button"]||o)),n.setAttribute("highcharts-data-tab-type",o),n}function N(o,n){var a=this.container.querySelectorAll(".highcharts-tab-item-content");o.className+=" highcharts-tab-item-active",a[n].className+=" highcharts-tab-item-show"}function r(o){var n=this;this.container.querySelectorAll(".highcharts-tab-item").forEach(function(a,c){o===0&&a.getAttribute("highcharts-data-tab-type")==="edit"||["click","touchstart"].forEach(function(m){e(a,m,function(){var p=n.container,i=p.querySelectorAll(".highcharts-tab-item");p=p.querySelectorAll(".highcharts-tab-item-content");for(var l=0;l<i.length;l++)i[l].classList.remove("highcharts-tab-item-active"),p[l].classList.remove("highcharts-tab-item-show");N.call(n,this,c)})})})}var t=O.doc,e=j.addEvent,s=j.createElement;return{init:function(o){if(o){o=this.indicators.getAmount.call(o);var n=w.call(this,"add");w.call(this,"edit",o),D.call(this),D.call(this),r.call(this,o),N.call(this,n,0)}}}}),X(f,"Extensions/Annotations/Popup/Popup.js",[f["Core/Renderer/HTML/AST.js"],f["Core/Defaults.js"],f["Core/Globals.js"],f["Extensions/Annotations/Popup/PopupAnnotations.js"],f["Extensions/Annotations/Popup/PopupIndicators.js"],f["Extensions/Annotations/Popup/PopupTabs.js"],f["Core/Utilities.js"]],function(O,j,D,w,N,r,t){function e(p,i){var l=Array.prototype.slice.call(p.querySelectorAll("input")),d=Array.prototype.slice.call(p.querySelectorAll("select")),y=p.querySelectorAll("#highcharts-select-series > option:checked")[0];p=p.querySelectorAll("#highcharts-select-volume > option:checked")[0];var b={actionType:i,linkedTo:y&&y.getAttribute("value")||"",fields:{}};return l.forEach(function(A){var M=A.getAttribute("highcharts-data-name");A.getAttribute("highcharts-data-series-id")?b.seriesId=A.value:M?b.fields[M]=A.value:b.type=A.value}),d.forEach(function(A){var M=A.id;M!=="highcharts-select-series"&&M!=="highcharts-select-volume"&&(M=M.split("highcharts-select-")[1],b.fields[M]=A.value)}),p&&(b.fields["params.volumeSeriesID"]=p.getAttribute("value")||""),b}var s=j.getOptions,o=D.doc,n=t.addEvent,a=t.createElement;j=t.extend;var c=t.fireEvent,m=t.pick;return t=function(){function p(i,l,d){this.chart=d,this.iconsURL=l,this.lang=s().lang.navigation.popup,this.container=a("div",{className:"highcharts-popup highcharts-no-tooltip"},void 0,i),n(this.container,"mousedown",function(){var y=d&&d.navigationBindings&&d.navigationBindings.activeAnnotation;if(y){y.cancelClick=!0;var b=n(D.doc,"click",function(){setTimeout(function(){y.cancelClick=!1},0),b()})}}),this.addCloseBtn()}return p.prototype.init=function(i,l,d){p.call(this,i,l,d)},p.prototype.addCloseBtn=function(){var i=this,l=this.iconsURL,d=a("div",{className:"highcharts-popup-close"},void 0,this.container);d.style["background-image"]="url("+(l.match(/png|svg|jpeg|jpg|gif/ig)?l:l+"close.svg")+")",["click","touchstart"].forEach(function(y){n(d,y,function(){if(i.chart){var b=i.chart.navigationBindings;c(b,"closePopup"),b&&b.selectedButtonElement&&c(b,"deselectButton",{button:b.selectedButtonElement})}else i.closePopup()})})},p.prototype.addInput=function(i,l,d,y){var b=i.split(".");b=b[b.length-1];var A=this.lang;return l="highcharts-"+l+"-"+m(y.htmlFor,b),b.match(/^\d+$/)||a("label",{htmlFor:l,className:y.labelClassName},void 0,d).appendChild(o.createTextNode(A[b]||b)),d=a("input",{name:l,value:y.value,type:y.type,className:"highcharts-popup-field"},void 0,d),d.setAttribute("highcharts-data-name",i),d},p.prototype.addButton=function(i,l,d,y,b){var A=this,M=a("button",void 0,void 0,i);return M.appendChild(o.createTextNode(l)),b&&["click","touchstart"].forEach(function(P){n(M,P,function(){return A.closePopup(),b(e(y,d))})}),M},p.prototype.showPopup=function(){var i=this.container,l=i.querySelectorAll(".highcharts-popup-close")[0];this.formType=void 0,i.innerHTML=O.emptyHTML,0<=i.className.indexOf("highcharts-annotation-toolbar")&&(i.classList.remove("highcharts-annotation-toolbar"),i.removeAttribute("style")),i.appendChild(l),i.style.display="block",i.style.height=""},p.prototype.closePopup=function(){this.container.style.display="none"},p.prototype.showForm=function(i,l,d,y){l&&(this.showPopup(),i==="indicators"&&this.indicators.addForm.call(this,l,d,y),i==="annotation-toolbar"&&this.annotations.addToolbar.call(this,l,d,y),i==="annotation-edit"&&this.annotations.addForm.call(this,l,d,y),i==="flag"&&this.annotations.addForm.call(this,l,d,y,!0),this.formType=i,this.container.style.height=this.container.offsetHeight+"px")},p}(),j(t.prototype,{annotations:w,indicators:N,tabs:r}),t}),X(f,"Extensions/Annotations/Popup/PopupComposition.js",[f["Extensions/Annotations/Popup/Popup.js"],f["Core/Utilities.js"]],function(O,j){function D(){this.popup&&this.popup.closePopup()}function w(s){this.popup||(this.popup=new O(this.chart.container,this.chart.options.navigation.iconsURL||this.chart.options.stockTools&&this.chart.options.stockTools.gui.iconsURL||"https://code.highcharts.com/10.3.3/gfx/stock-icons/",this.chart)),this.popup.showForm(s.formType,this.chart,s.options,s.onSubmit)}function N(s,o){this.inClass(o.target,"highcharts-popup")||s.apply(this,Array.prototype.slice.call(arguments,1))}var r=j.addEvent,t=j.wrap,e=[];return{compose:function(s,o){e.indexOf(s)===-1&&(e.push(s),r(s,"closePopup",D),r(s,"showPopup",w)),e.indexOf(o)===-1&&(e.push(o),t(o.prototype,"onContainerMouseDown",N))}}}),X(f,"Extensions/Annotations/Annotation.js",[f["Core/Animation/AnimationUtilities.js"],f["Extensions/Annotations/AnnotationChart.js"],f["Extensions/Annotations/AnnotationDefaults.js"],f["Extensions/Annotations/Controllables/Controllable.js"],f["Extensions/Annotations/Controllables/ControllableRect.js"],f["Extensions/Annotations/Controllables/ControllableCircle.js"],f["Extensions/Annotations/Controllables/ControllableEllipse.js"],f["Extensions/Annotations/Controllables/ControllablePath.js"],f["Extensions/Annotations/Controllables/ControllableImage.js"],f["Extensions/Annotations/Controllables/ControllableLabel.js"],f["Extensions/Annotations/ControlPoint.js"],f["Extensions/Annotations/EventEmitter.js"],f["Extensions/Annotations/MockPoint.js"],f["Extensions/Annotations/NavigationBindings.js"],f["Extensions/Annotations/Popup/PopupComposition.js"],f["Core/Utilities.js"]],function(O,j,D,w,N,r,t,e,s,o,n,a,c,m,p,i){function l(B){var v=B.graphic;B=B.points.some(function(h){return h.series.visible!==!1&&h.visible!==!1}),v&&(B?v.visibility==="hidden"&&v.show():v.hide())}function d(B,v){var h={};return["labels","shapes"].forEach(function(u){var g=B[u];g&&(h[u]=v[u]?T(v[u]).map(function(k,x){return Y(g[x],k)}):B[u])}),h}var y=this&&this.__extends||function(){var B=function(v,h){return B=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,g){u.__proto__=g}||function(u,g){for(var k in g)g.hasOwnProperty(k)&&(u[k]=g[k])},B(v,h)};return function(v,h){function u(){this.constructor=v}B(v,h),v.prototype=h===null?Object.create(h):(u.prototype=h.prototype,new u)}}(),b=O.getDeferredAnimation,A=w.prototype,M=i.destroyObjectProperties,P=i.erase,I=i.fireEvent,Y=i.merge,W=i.pick,T=i.splat;return O=function(B){function v(h,u){var g=B.call(this)||this;return g.annotation=void 0,g.coll="annotations",g.collection=void 0,g.animationConfig=void 0,g.graphic=void 0,g.group=void 0,g.labelCollector=void 0,g.labelsGroup=void 0,g.shapesGroup=void 0,g.chart=h,g.points=[],g.controlPoints=[],g.coll="annotations",g.labels=[],g.shapes=[],g.options=Y(g.defaultOptions,u),g.userOptions=u,u=d(g.options,u),g.options.labels=u.labels,g.options.shapes=u.shapes,g.init(h,g.options),g}return y(v,B),v.compose=function(h,u,g){j.compose(v,h,u),o.compose(g),e.compose(h,g),m.compose(v,h),p.compose(m,u)},v.prototype.addClipPaths=function(){this.setClipAxes(),this.clipXAxis&&this.clipYAxis&&this.options.crop&&(this.clipRect=this.chart.renderer.clipRect(this.getClipBox()))},v.prototype.addLabels=function(){var h=this,u=this.options.labels||[];u.forEach(function(g,k){g=h.initLabel(g,k),Y(!0,u[k],g.options)})},v.prototype.addShapes=function(){var h=this,u=this.options.shapes||[];u.forEach(function(g,k){g=h.initShape(g,k),Y(!0,u[k],g.options)})},v.prototype.destroy=function(){var h=this.chart,u=function(g){g.destroy()};this.labels.forEach(u),this.shapes.forEach(u),this.clipYAxis=this.clipXAxis=null,P(h.labelCollectors,this.labelCollector),B.prototype.destroy.call(this),A.destroy.call(this),M(this,h)},v.prototype.destroyItem=function(h){P(this[h.itemType+"s"],h),h.destroy()},v.prototype.getClipBox=function(){if(this.clipXAxis&&this.clipYAxis)return{x:this.clipXAxis.left,y:this.clipYAxis.top,width:this.clipXAxis.width,height:this.clipYAxis.height}},v.prototype.init=function(h,u,g){h=this.chart,u=this.options.animation,this.linkPoints(),this.addControlPoints(),this.addShapes(),this.addLabels(),this.setLabelCollector(),this.animationConfig=b(h,u)},v.prototype.initLabel=function(h,u){return h=Y(this.options.labelOptions,{controlPointOptions:this.options.controlPointOptions},h),u=new o(this,h,u),u.itemType="label",this.labels.push(u),u},v.prototype.initShape=function(h,u){return h=Y(this.options.shapeOptions,{controlPointOptions:this.options.controlPointOptions},h),u=new v.shapesMap[h.type](this,h,u),u.itemType="shape",this.shapes.push(u),u},v.prototype.redraw=function(h){this.linkPoints(),this.graphic||this.render(),this.clipRect&&this.clipRect.animate(this.getClipBox()),this.redrawItems(this.shapes,h),this.redrawItems(this.labels,h),A.redraw.call(this,h)},v.prototype.redrawItem=function(h,u){h.linkPoints(),h.shouldBeDrawn()?(h.graphic||this.renderItem(h),h.redraw(W(u,!0)&&h.graphic.placed),h.points.length&&l(h)):this.destroyItem(h)},v.prototype.redrawItems=function(h,u){for(var g=h.length;g--;)this.redrawItem(h[g],u)},v.prototype.remove=function(){return this.chart.removeAnnotation(this)},v.prototype.render=function(){var h=this.chart.renderer;this.graphic=h.g("annotation").attr({opacity:0,zIndex:this.options.zIndex,visibility:this.options.visible?"inherit":"hidden"}).add(),this.shapesGroup=h.g("annotation-shapes").add(this.graphic),this.options.crop&&this.shapesGroup.clip(this.chart.plotBoxClip),this.labelsGroup=h.g("annotation-labels").attr({translateX:0,translateY:0}).add(this.graphic),this.addClipPaths(),this.clipRect&&this.graphic.clip(this.clipRect),this.renderItems(this.shapes),this.renderItems(this.labels),this.addEvents(),A.render.call(this)},v.prototype.renderItem=function(h){h.render(h.itemType==="label"?this.labelsGroup:this.shapesGroup)},v.prototype.renderItems=function(h){for(var u=h.length;u--;)this.renderItem(h[u])},v.prototype.setClipAxes=function(){var h=this.chart.xAxis,u=this.chart.yAxis,g=(this.options.labels||[]).concat(this.options.shapes||[]).reduce(function(k,x){return x=x&&(x.point||x.points&&x.points[0]),[h[x&&x.xAxis]||k[0],u[x&&x.yAxis]||k[1]]},[]);this.clipXAxis=g[0],this.clipYAxis=g[1]},v.prototype.setControlPointsVisibility=function(h){var u=function(g){g.setControlPointsVisibility(h)};A.setControlPointsVisibility.call(this,h),this.shapes.forEach(u),this.labels.forEach(u)},v.prototype.setLabelCollector=function(){var h=this;h.labelCollector=function(){return h.labels.reduce(function(u,g){return g.options.allowOverlap||u.push(g.graphic),u},[])},h.chart.labelCollectors.push(h.labelCollector)},v.prototype.setOptions=function(h){this.options=Y(this.defaultOptions,h)},v.prototype.setVisibility=function(h){var u=this.options,g=this.chart.navigationBindings;h=W(h,!u.visible),this.graphic.attr("visibility",h?"inherit":"hidden"),h||(this.setControlPointsVisibility(!1),g.activeAnnotation===this&&g.popup&&g.popup.formType==="annotation-toolbar"&&I(g,"closePopup")),u.visible=h},v.prototype.update=function(h,u){var g=this.chart,k=d(this.userOptions,h),x=g.annotations.indexOf(this);h=Y(!0,this.userOptions,h),h.labels=k.labels,h.shapes=k.shapes,this.destroy(),this.constructor(g,h),g.options.annotations[x]=h,this.isUpdating=!0,W(u,!0)&&g.redraw(),I(this,"afterUpdate"),this.isUpdating=!1},v.ControlPoint=n,v.MockPoint=c,v.shapesMap={rect:N,circle:r,ellipse:t,path:e,image:s},v.types={},v}(a),Y(!0,O.prototype,w.prototype,Y(O.prototype,{nonDOMEvents:["add","afterUpdate","drag","remove"],defaultOptions:D})),O}),X(f,"masters/modules/annotations.src.js",[f["Core/Globals.js"],f["Extensions/Annotations/Annotation.js"]],function(O,j){O.Annotation=j,j.compose(O.Chart,O.Pointer,O.SVGRenderer)})})})(ot);const nt=Z,et=it({__proto__:null,default:nt},[Z]);export{et as a};
